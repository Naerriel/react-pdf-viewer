"use strict";var e=require("@react-pdf-viewer/core");function t(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var n=t(require("react")),r=function(){return n.createElement(e.Icon,{size:16},n.createElement("path",{d:"M18.5,7.5c.275,0,.341-.159.146-.354L12.354.854a.5.5,0,0,0-.708,0L5.354,7.147c-.2.195-.129.354.146.354h3v10a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V7.5Z"}),n.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var c=function(e){var t=n.useRef(),r=function(){var n=t.current;n&&(n.click(),e.get("triggerOpenFile")&&e.update("triggerOpenFile",!1))},o=function(e){e&&r()};return n.useEffect((function(){return e.subscribe("triggerOpenFile",o),function(){e.unsubscribe("triggerOpenFile",o)}}),[]),{inputRef:t,openFile:r}},i=function(t){var o=t.enableShortcuts,i=t.store,u=t.onClick,a=n.useContext(e.LocalizationContext).l10n,l=a&&a.open?a.open.openFile:"Open file",p=c(i),f=p.inputRef,s=p.openFile,m=o?e.isMac()?"Meta+O":"Ctrl+O":"";return n.createElement(e.Tooltip,{ariaControlsSuffix:"open",position:e.Position.BottomCenter,target:n.createElement("div",{className:"rpv-open__input-wrapper"},n.createElement("input",{accept:".pdf",ref:f,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:u}),n.createElement(e.MinimalButton,{ariaKeyShortcuts:m,ariaLabel:l,testId:"open__button",onClick:s},n.createElement(r,null))),content:function(){return l}})},u=function(e){var t=e.children,r=e.enableShortcuts,o=e.store;return(t||function(e){return n.createElement(i,{enableShortcuts:r,store:o,onClick:e.onClick})})({onClick:function(e){var t=e.target.files;if(t&&t.length){var n=o.get("openFile");n&&n(t[0])}}})},a=function(t){var o=t.store,i=t.onClick,u=n.useContext(e.LocalizationContext).l10n,a=u&&u.open?u.open.openFile:"Open file",l=c(o),p=l.inputRef,f=l.openFile;return n.createElement(e.MenuItem,{icon:n.createElement(r,null),testId:"open__menu",onClick:f},n.createElement("div",{className:"rpv-open__input-wrapper"},n.createElement("input",{accept:".pdf",ref:p,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:i}),a))},l=function(t){var r=t.containerRef,o=t.store,c=n.useState(r.current),i=c[0],u=c[1];n.useEffect((function(){r.current!==i&&u(r.current)}),[]);var a=n.useCallback((function(t){!i||t.shiftKey||t.altKey||"o"!==t.key||(e.isMac()?t.metaKey:t.ctrlKey)&&document.activeElement&&i.contains(document.activeElement)&&(t.preventDefault(),o.update("triggerOpenFile",!0))}),[i]);return n.useEffect((function(){if(i)return document.addEventListener("keydown",a),function(){document.removeEventListener("keydown",a)}}),[i]),n.createElement(n.Fragment,null)};exports.OpenFileIcon=r,exports.openPlugin=function(t){var r=n.useMemo((function(){return Object.assign({},{enableShortcuts:!0},t)}),[]),c=n.useMemo((function(){return e.createStore({})}),[]),i=function(e){return n.createElement(u,o({enableShortcuts:r.enableShortcuts},e,{store:c}))};return{install:function(e){c.update("openFile",e.openFile)},renderViewer:function(e){var t=e.slot,i={children:n.createElement(n.Fragment,null,r.enableShortcuts&&n.createElement(l,{containerRef:e.containerRef,store:c}),t.children)};return o(o({},t),i)},Open:i,OpenButton:function(){return n.createElement(i,null)},OpenMenuItem:function(){return n.createElement(i,null,(function(e){return n.createElement(a,{store:c,onClick:e.onClick})}))}}};
