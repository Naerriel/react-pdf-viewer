import*as e from"react";import*as t from"pdfjs-dist";import*as n from"react-dom";var r="undefined"!=typeof window?e.useLayoutEffect:e.useEffect,o=function(t){var n=e.useRef(null),o=t.once,a=t.threshold,i=t.onVisibilityChanged;return r((function(){var e=n.current;if(e){var t=new IntersectionObserver((function(n){n.forEach((function(n){var r=n.isIntersecting,a=n.intersectionRatio;i({isVisible:r,ratio:a}),r&&o&&(t.unobserve(e),t.disconnect())}))}),{threshold:a||0});return t.observe(e),function(){t.unobserve(e),t.disconnect()}}}),[]),n},a=function(t){var n=e.useRef(t);return e.useEffect((function(){n.current=t}),[t]),n.current},i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)};function l(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var s,d,p=function(t,n){var r=e.useRef(),o=function(){r.current&&clearTimeout(r.current)};return e.useEffect((function(){return function(){return o()}}),[]),e.useCallback((function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];o(),r.current=setTimeout((function(){t.apply(void 0,e)}),n)}),[t,n])},f={capture:!1,passive:!0},h={height:0,width:0};!function(e){e.Normal="Normal",e.Entering="Entering",e.Entered="Entered",e.Exitting="Exitting",e.Exited="Exited"}(s||(s={})),function(e){e[e.ExitFullScreen=0]="ExitFullScreen",e[e.FullScreenChange=1]="FullScreenChange",e[e.FullScreenElement=2]="FullScreenElement",e[e.FullScreenEnabled=3]="FullScreenEnabled",e[e.RequestFullScreen=4]="RequestFullScreen"}(d||(d={}));var g,v={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},m={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},w={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},b="undefined"!=typeof window,E=b&&(d.FullScreenEnabled in document&&v||m.FullScreenEnabled in document&&m||w.FullScreenEnabled in document&&w)||v,_=function(){return b&&E.FullScreenEnabled in document&&!0===document[E.FullScreenEnabled]},y=function(e){return b?e[E.ExitFullScreen]():Promise.resolve({})},x=function(){return b?document[E.FullScreenElement]:null},P={height:0,width:0},R=function(e,t){return Math.abs(e-t)<=2},k=function(t){var n=t.targetRef,o=e.useState(s.Normal),a=o[0],i=o[1],c=function(){var t=e.useState(h),n=t[0],o=t[1],a=p((function(){o({height:window.innerHeight,width:window.innerWidth})}),100);return r((function(){return window.addEventListener("resize",a,f),function(){window.removeEventListener("resize",a,f)}}),[]),n}(),u=e.useState(P),l=u[0],d=u[1],g=e.useRef(P),v=e.useRef(P),m=e.useState(n.current),w=m[0],k=m[1],C=e.useRef();r((function(){n.current!==w&&k(n.current)}),[]),r((function(){if(w){var e=new ResizeObserver((function(e){e.forEach((function(e){d({height:e.target.clientHeight,width:e.target.clientWidth})}))}));return e.observe(w),function(){e.unobserve(w),e.disconnect()}}}),[w]);var S=e.useCallback((function(e){var t=x();return t&&t!==e?(i(s.Normal),y(t)):Promise.resolve()}),[]),L=e.useCallback((function(e){e&&_()&&(k(e),S(e).then((function(){C.current=e,i(s.Entering),function(e){b&&e[E.RequestFullScreen]()}(e)})))}),[]),M=e.useCallback((function(){x()&&(i(s.Exitting),y(document))}),[]),O=e.useCallback((function(){w&&(x()!==w&&i(s.Exitting))}),[w]);return e.useEffect((function(){switch(a){case s.Entering:C.current&&(C.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),g.current={height:window.innerHeight,width:window.innerWidth};break;case s.Entered:break;case s.Exitting:C.current&&(C.current.style.backgroundColor="",C.current=null);break;case s.Exited:i(s.Normal)}}),[a]),e.useEffect((function(){if(a!==s.Normal)return a===s.Entering&&R(c.height,l.height)&&R(c.width,l.width)&&c.height>0&&c.width>0&&(0===v.current.height||R(c.height,v.current.height))?(v.current={height:window.innerHeight,width:window.innerWidth},void i(s.Entered)):void(a===s.Exitting&&R(g.current.height,c.height)&&R(g.current.width,c.width)&&c.height>0&&c.width>0&&i(s.Exited))}),[a,c,l]),e.useEffect((function(){var e;return e=O,b&&document.addEventListener(E.FullScreenChange,e),function(){!function(e){b&&document.removeEventListener(E.FullScreenChange,e)}(O)}}),[w]),{enterFullScreenMode:L,exitFullScreenMode:M,fullScreenMode:a}},C=function(t,n,r){void 0===n&&(n=!1);var o=e.useRef(t),a=e.useRef(-1);o.current=t;var i=e.useCallback((function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];cancelAnimationFrame(a.current),a.current=requestAnimationFrame((function(){t.apply(void 0,e),n&&i.apply(void 0,e)}))}),l(l([],r,!0),[n],!1)),c=e.useCallback((function(){cancelAnimationFrame(a.current)}),[]);return e.useEffect((function(){return function(){return c()}}),[]),[i]};!function(e){e.NotRenderedYet="NotRenderedYet",e.Rendering="Rendering",e.Rendered="Rendered"}(g||(g={}));var S,L,M,O=-9999,T=function(t){var n=t.doc,r=n.numPages,o=n.loadingTask.docId,a=e.useMemo((function(){return Array(r).fill(null).map((function(e,t){return{pageIndex:t,renderStatus:g.NotRenderedYet,visibility:O}}))}),[o]),i=e.useRef({currentRenderingPage:-1,startRange:0,endRange:r-1,visibilities:a}),c=function(e,t){i.current.visibilities[e].visibility=t};return{getHighestPriorityPage:function(){var e=i.current.visibilities.slice(i.current.startRange,i.current.endRange+1).filter((function(e){return e.visibility>O}));if(!e.length)return-1;for(var t=e[0].pageIndex,n=e[e.length-1].pageIndex,o=e.length,a=-1,c=-1,u=0;u<o;u++){if(e[u].renderStatus===g.Rendering)return-1;e[u].renderStatus===g.NotRenderedYet&&(-1===a||e[u].visibility>c)&&(a=e[u].pageIndex,c=e[u].visibility)}return a>-1?a:n+1<r&&i.current.visibilities[n+1].renderStatus!==g.Rendered?n+1:t-1>=0&&i.current.visibilities[t-1].renderStatus!==g.Rendered?t-1:-1},isInRange:function(e){return e>=i.current.startRange&&e<=i.current.endRange},markNotRendered:function(){for(var e=0;e<r;e++)i.current.visibilities[e].renderStatus=g.NotRenderedYet},markRendered:function(e){i.current.visibilities[e].renderStatus=g.Rendered},markRendering:function(e){-1!==i.current.currentRenderingPage&&i.current.currentRenderingPage!==e&&i.current.visibilities[i.current.currentRenderingPage].renderStatus===g.Rendering&&(i.current.visibilities[i.current.currentRenderingPage].renderStatus=g.NotRenderedYet),i.current.visibilities[e].renderStatus=g.Rendering,i.current.currentRenderingPage=e},setOutOfRange:function(e){c(e,O)},setRange:function(e,t){i.current.startRange=e,i.current.endRange=t;for(var n=0;n<r;n++)n<e||n>t?(i.current.visibilities[n].visibility=O,i.current.visibilities[n].renderStatus=g.NotRenderedYet):i.current.visibilities[n].visibility===O&&(i.current.visibilities[n].visibility=-1)},setVisibility:c}};!function(e){e[e.Text=1]="Text",e[e.Link=2]="Link",e[e.FreeText=3]="FreeText",e[e.Line=4]="Line",e[e.Square=5]="Square",e[e.Circle=6]="Circle",e[e.Polygon=7]="Polygon",e[e.Polyline=8]="Polyline",e[e.Highlight=9]="Highlight",e[e.Underline=10]="Underline",e[e.Squiggly=11]="Squiggly",e[e.StrikeOut=12]="StrikeOut",e[e.Stamp=13]="Stamp",e[e.Caret=14]="Caret",e[e.Ink=15]="Ink",e[e.Popup=16]="Popup",e[e.FileAttachment=17]="FileAttachment"}(S||(S={})),function(e){e[e.Solid=1]="Solid",e[e.Dashed=2]="Dashed",e[e.Beveled=3]="Beveled",e[e.Inset=4]="Inset",e[e.Underline=5]="Underline"}(L||(L={})),function(e){e.RightToLeft="RTL",e.LeftToRight="LTR"}(M||(M={}));var I,F=e.createContext({currentTheme:"light",direction:M.LeftToRight,setCurrentTheme:function(){}}),N=function(e){var t=[];return Object.keys(e).forEach((function(n){n&&e[n]&&t.push(n)})),t.join(" ")},D=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),H=function(e,t,n,r){var o=parseInt(e,10);return o>=t&&o<=n?o:r},A=function(e){return e.contentsObj?e.contentsObj.str:e.contents||""},z=function(e){return e.titleObj?e.titleObj.str:e.title||""},B=function(t){var n=t.annotation,r=e.useContext(F).direction,o=z(n),a=A(n),i=r===M.RightToLeft,c=e.useRef(),u="";if(n.modificationDate){var l=function(e){var t=D.exec(e);if(!t)return null;var n=parseInt(t[1],10),r=H(t[2],1,12,1)-1,o=H(t[3],1,31,1),a=H(t[4],0,23,0),i=H(t[5],0,59,0),c=H(t[6],0,59,0),u=t[7]||"Z",l=H(t[8],0,23,0),s=H(t[9],0,59,0);switch(u){case"-":a+=l,i+=s;break;case"+":a-=l,i-=s}return new Date(Date.UTC(n,r,o,a,i,c))}(n.modificationDate);u=l?"".concat(l.toLocaleDateString(),", ").concat(l.toLocaleTimeString()):""}return e.useLayoutEffect((function(){if(c.current){var e=document.querySelector('[data-annotation-id="'.concat(n.id,'"]'));if(e){var t=e;return t.style.zIndex+=1,function(){t.style.zIndex="".concat(parseInt(t.style.zIndex,10)-1)}}}}),[]),e.createElement("div",{ref:c,className:N({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":i}),style:{top:n.annotationType===S.Popup?"":"100%"}},o&&e.createElement(e.Fragment,null,e.createElement("div",{className:N({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!i,"rpv-core__annotation-popup-title--rtl":i})},o),e.createElement("div",{className:"rpv-core__annotation-popup-date"},u)),a&&e.createElement("div",{className:"rpv-core__annotation-popup-content"},a.split("\n").map((function(t,n){return e.createElement(e.Fragment,{key:n},t,e.createElement("br",null))}))))};!function(e){e.Close="Close",e.Open="Open",e.Toggle="Toggle"}(I||(I={}));var V,W=function(t){var n=e.useState(t),r=n[0],o=n[1];return{opened:r,toggle:function(e){switch(e){case I.Close:o(!1);break;case I.Open:o(!0);break;case I.Toggle:default:o((function(e){return!e}))}}}};!function(e){e.Click="Click",e.Hover="Hover"}(V||(V={}));var q,j=function(t){var n,r=t.annotation,o=t.children,a=t.ignoreBorder,i=t.hasPopup,c=t.isRenderable,u=t.page,l=t.viewport,s=r.rect,d=function(){var t=W(!1),n=t.opened,r=t.toggle,o=e.useState(V.Hover),a=o[0],i=o[1];return{opened:n,closeOnHover:function(){a===V.Hover&&r(I.Close)},openOnHover:function(){a===V.Hover&&r(I.Open)},toggleOnClick:function(){switch(a){case V.Click:n&&i(V.Hover),r(I.Toggle);break;case V.Hover:i(V.Click),r(I.Open)}}}}(),p=d.closeOnHover,f=d.opened,h=d.openOnHover,g=d.toggleOnClick,v=(n=[s[0],u.view[3]+u.view[1]-s[1],s[2],u.view[3]+u.view[1]-s[3]],[Math.min(n[0],n[2]),Math.min(n[1],n[3]),Math.max(n[0],n[2]),Math.max(n[1],n[3])]),m=s[2]-s[0],w=s[3]-s[1],b={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!a&&r.borderStyle.width>0){switch(r.borderStyle.style){case L.Dashed:b.borderStyle="dashed";break;case L.Solid:b.borderStyle="solid";break;case L.Underline:b=Object.assign({borderBottomStyle:"solid"},b);case L.Beveled:case L.Inset:}var E=r.borderStyle.width;b.borderWidth="".concat(E,"px"),r.borderStyle.style!==L.Underline&&(m-=2*E,w-=2*E);var _=r.borderStyle,y=_.horizontalCornerRadius,x=_.verticalCornerRadius;(y>0||x>0)&&(b.borderRadius="".concat(y,"px / ").concat(x,"px")),r.color?b.borderColor="rgb(".concat(0|r.color[0],", ").concat(0|r.color[1],", ").concat(0|r.color[2],")"):b.borderWidth="0"}return e.createElement(e.Fragment,null,c&&o({popup:{opened:f,closeOnHover:p,openOnHover:h,toggleOnClick:g},slot:{attrs:{style:Object.assign({height:"".concat(w,"px"),left:"".concat(v[0],"px"),top:"".concat(v[1],"px"),transform:"matrix(".concat(l.transform.join(","),")"),transformOrigin:"-".concat(v[0],"px -").concat(v[1],"px"),width:"".concat(m,"px")},b)},children:e.createElement(e.Fragment,null,i&&f&&e.createElement(B,{annotation:r}))}}))},U=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c);return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),t.slot.children)}))},J=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c),s=n.rect,d=s[2]-s[0],p=s[3]-s[1],f=n.borderStyle.width;return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),e.createElement("svg",{height:"".concat(p,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(p),width:"".concat(d,"px")},e.createElement("circle",{cy:p/2,fill:"none",rx:d/2-f/2,ry:p/2-f/2,stroke:"transparent",strokeWidth:f||1})),t.slot.children)}))},G=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=z(n),i=A(n),c=!(!1!==n.hasPopup||!a&&!i),l=function(){var e,t,r,o,a=n.file;a&&(e=a.filename,t=a.content,r="string"==typeof t?"":URL.createObjectURL(new Blob([t],{type:""})),(o=document.createElement("a")).style.display="none",o.href=r||e,o.setAttribute("download",function(e){var t=e.split("/").pop();return t?t.split("#")[0].split("?")[0]:e}(e)),document.body.appendChild(o),o.click(),document.body.removeChild(o),r&&URL.revokeObjectURL(r))};return e.createElement(j,{annotation:n,hasPopup:c,ignoreBorder:!0,isRenderable:!0,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onDoubleClick:l,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),t.slot.children)}))},Y=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c);return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),t.slot.children)}))},Z=function(t){var n=t.annotation,o=t.page,a=t.viewport,i=z(n),c=A(n),l=!(!i&&!c),s=!n.parentType||-1!==["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(n.parentType);return r((function(){if(n.parentId){var e=document.querySelector('[data-annotation-id="'.concat(n.parentId,'"]')),t=document.querySelector('[data-annotation-id="'.concat(n.id,'"]'));if(e&&t){var r=parseFloat(e.style.left),o=parseFloat(e.style.top)+parseFloat(e.style.height);t.style.left="".concat(r,"px"),t.style.top="".concat(o,"px"),t.style.transformOrigin="-".concat(r,"px -").concat(o,"px")}}}),[]),e.createElement(j,{annotation:n,hasPopup:s,ignoreBorder:!1,isRenderable:l,page:o,viewport:a},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":n.id}),e.createElement(B,{annotation:n}))}))},K=function(t){var n=t.annotation,r=t.childAnnotation,o=t.page,a=t.viewport,i=!1===n.hasPopup,c=z(n),l=A(n),s=!!(n.hasPopup||c||l);if(n.quadPoints&&n.quadPoints.length>0){var d=n.quadPoints.map((function(e){return Object.assign({},n,{rect:[e[2].x,e[2].y,e[1].x,e[1].y],quadPoints:[]})}));return e.createElement(e.Fragment,null,d.map((function(t,n){return e.createElement(K,{key:n,annotation:t,childAnnotation:r,page:o,viewport:a})})))}return e.createElement(j,{annotation:n,hasPopup:i,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(t){return e.createElement(e.Fragment,null,e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),t.slot.children),r&&r.annotationType===S.Popup&&t.popup.opened&&e.createElement(Z,{annotation:r,page:o,viewport:a}))}))},X=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c),s=n.rect,d=s[2]-s[0],p=s[3]-s[1],f=n.borderStyle.width;return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),n.inkLists&&n.inkLists.length&&e.createElement("svg",{height:"".concat(p,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(p),width:"".concat(d,"px")},n.inkLists.map((function(t,n){return e.createElement("polyline",{key:n,fill:"none",stroke:"transparent",strokeWidth:f||1,points:t.map((function(e){return"".concat(e.x-s[0],",").concat(s[3]-e.y)})).join(" ")})}))),t.slot.children)}))},Q=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c),s=n.rect,d=s[2]-s[0],p=s[3]-s[1],f=n.borderStyle.width;return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),e.createElement("svg",{height:"".concat(p,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(p),width:"".concat(d,"px")},e.createElement("line",{stroke:"transparent",strokeWidth:f||1,x1:s[2]-n.lineCoordinates[0],x2:s[2]-n.lineCoordinates[2],y1:s[3]-n.lineCoordinates[1],y2:s[3]-n.lineCoordinates[3]})),t.slot.children)}))};!function(e){e.ActualSize="ActualSize",e.PageFit="PageFit",e.PageWidth="PageWidth"}(q||(q={}));var $,ee,te=function(e,t){switch(t[1].name){case"XYZ":return{bottomOffset:function(e,n){return null===t[3]?n:t[3]},leftOffset:function(e,n){return null===t[2]?0:t[2]},pageIndex:e,scaleTo:t[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:e,scaleTo:q.PageFit};case"FitH":case"FitBH":return{bottomOffset:t[2],leftOffset:0,pageIndex:e,scaleTo:q.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:e,scaleTo:1}}},ne=new Map,re=new Map,oe=function(e,t){return"".concat(e.loadingTask.docId,"___").concat(t.num,"R").concat(0===t.gen?"":t.gen)},ae=function(e,t,n){ne.set(oe(e,t),n)},ie=function(e,t){if(!e)return Promise.reject("The document is not loaded yet");var n="".concat(e.loadingTask.docId,"___").concat(t),r=re.get(n);return r?Promise.resolve(r):new Promise((function(r,o){e.getPage(t+1).then((function(o){re.set(n,o),o.ref&&ae(e,o.ref,t),r(o)}))}))},ce=function(e,t){return new Promise((function(n){new Promise((function(n){"string"==typeof t?e.getDestination(t).then((function(e){n(e)})):n(t)})).then((function(r){if("object"==typeof r[0]&&null!==r[0]){var o=r[0],a=function(e,t){var n=oe(e,t);return ne.has(n)?ne.get(n):null}(e,o);null===a?e.getPageIndex(o).then((function(r){ae(e,o,r),ce(e,t).then((function(e){return n(e)}))})):n(te(a,r))}else{var i=te(r[0],r);n(i)}}))}))},ue=/^([^\w]*)(javascript|data|vbscript)/im,le=/&#(\w+)(^\w|;)?/g,se=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,de=/^([^:]+):/gm,pe=function(e,t){void 0===t&&(t="about:blank");var n,r=(n=e||"",n.replace(le,(function(e,t){return String.fromCharCode(t)}))).replace(se,"").trim();if(!r)return t;var o=r[0];if("."===o||"/"===o)return r;var a=r.match(de);if(!a)return r;var i=a[0];return ue.test(i)?t:r},fe=function(t){var n,r=t.annotation,o=t.annotationContainerRef,a=t.doc,i=t.outlines,c=t.page,l=t.pageIndex,s=t.scale,d=t.viewport,p=t.onExecuteNamedAction,f=t.onJumpFromLinkAnnotation,h=t.onJumpToDest,g=e.useRef(),v=i&&i.length&&r.dest&&"string"==typeof r.dest?null===(n=i.find((function(e){return e.dest===r.dest})))||void 0===n?void 0:n.title:"",m=!!(r.url||r.dest||r.action||r.unsafeUrl),w={};if(r.url||r.unsafeUrl){var b=pe(r.url||r.unsafeUrl,"");b?w={"data-target":"external",href:b,rel:"noopener noreferrer nofollow",target:r.newWindow?"_blank":"",title:b}:m=!1}else w={href:"","data-annotation-link":r.id,onClick:function(e){e.preventDefault(),r.action?p(r.action):ce(a,r.dest).then((function(e){var t=g.current,n=o.current;if(t&&n){var r=t.getBoundingClientRect();n.style.setProperty("height","100%"),n.style.setProperty("width","100%");var a=n.getBoundingClientRect();n.style.removeProperty("height"),n.style.removeProperty("width");var i=(r.left-a.left)/s,c=(a.bottom-r.bottom+r.height)/s;f({bottomOffset:c,label:v,leftOffset:i,pageIndex:l})}h(e)}))}};return v&&(w=Object.assign({},w,{title:v,"aria-label":v})),e.createElement(j,{annotation:r,hasPopup:!1,ignoreBorder:!1,isRenderable:m,page:c,viewport:d},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":r.id,"data-testid":"core__annotation--link-".concat(r.id)}),e.createElement("a",u({ref:g},w)))}))},he=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c),s=n.rect,d=s[2]-s[0],p=s[3]-s[1],f=n.borderStyle.width;return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),n.vertices&&n.vertices.length&&e.createElement("svg",{height:"".concat(p,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(p),width:"".concat(d,"px")},e.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:f||1,points:n.vertices.map((function(e){return"".concat(e.x-s[0],",").concat(s[3]-e.y)})).join(" ")})),t.slot.children)}))},ge=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c),s=n.rect,d=s[2]-s[0],p=s[3]-s[1],f=n.borderStyle.width;return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),n.vertices&&n.vertices.length&&e.createElement("svg",{height:"".concat(p,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(p),width:"".concat(d,"px")},e.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:f||1,points:n.vertices.map((function(e){return"".concat(e.x-s[0],",").concat(s[3]-e.y)})).join(" ")})),t.slot.children)}))},ve=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c),s=n.rect,d=s[2]-s[0],p=s[3]-s[1],f=n.borderStyle.width;return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),e.createElement("svg",{height:"".concat(p,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(d," ").concat(p),width:"".concat(d,"px")},e.createElement("rect",{height:p-f,fill:"none",stroke:"transparent",strokeWidth:f||1,x:f/2,y:f/2,width:d-f})),t.slot.children)}))},me=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c);return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),t.slot.children)}))},we=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c);return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),t.slot.children)}))},be=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c);return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),t.slot.children)}))},Ee=function(t){var n=t.children,r=t.ignoreDirection,o=void 0!==r&&r,a=t.size,i=void 0===a?24:a,c=e.useContext(F).direction,u=!o&&c===M.RightToLeft,l="".concat(i||24,"px");return e.createElement("svg",{"aria-hidden":"true",className:N({"rpv-core__icon":!0,"rpv-core__icon--rtl":u}),focusable:"false",height:l,viewBox:"0 0 24 24",width:l},n)},_e=function(){return e.createElement(Ee,{size:16},e.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},ye=function(){return e.createElement(Ee,{size:16},e.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),e.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),e.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),e.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},xe=function(){return e.createElement(Ee,{size:16},e.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),e.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),e.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),e.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),e.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),e.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),e.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),e.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),e.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),e.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Pe=function(){return e.createElement(Ee,{size:16},e.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),e.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Re=function(){return e.createElement(Ee,{size:16},e.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),e.createElement("path",{d:"M6 4.5L6 0.5"}),e.createElement("path",{d:"M18 4.5L18 0.5"}),e.createElement("path",{d:"M10 4.5L10 0.5"}),e.createElement("path",{d:"M14 4.5L14 0.5"}))},ke=function(){return e.createElement(Ee,{size:16},e.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),e.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),e.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Ce=function(){return e.createElement(Ee,{size:16},e.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},Se=function(t){var n=t.annotation,r=t.childAnnotation,o=t.page,a=t.viewport,i=!1===n.hasPopup,c=z(n),l=A(n),s=!!(n.hasPopup||c||l),d=n.name?n.name.toLowerCase():"";return e.createElement(j,{annotation:n,hasPopup:i,ignoreBorder:!1,isRenderable:s,page:o,viewport:a},(function(t){return e.createElement(e.Fragment,null,e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),d&&e.createElement("div",{className:"rpv-core__annotation-text-icon"},"check"===d&&e.createElement(_e,null),"comment"===d&&e.createElement(ye,null),"help"===d&&e.createElement(xe,null),"insert"===d&&e.createElement(Ce,null),"key"===d&&e.createElement(Pe,null),"note"===d&&e.createElement(Re,null),("newparagraph"===d||"paragraph"===d)&&e.createElement(ke,null)),t.slot.children),r&&r.annotationType===S.Popup&&t.popup.opened&&e.createElement(Z,{annotation:r,page:o,viewport:a}))}))},Le=function(t){var n=t.annotation,r=t.page,o=t.viewport,a=!1===n.hasPopup,i=z(n),c=A(n),l=!!(n.hasPopup||i||c);return e.createElement(j,{annotation:n,hasPopup:a,ignoreBorder:!0,isRenderable:l,page:r,viewport:o},(function(t){return e.createElement("div",u({},t.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":n.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover}),t.slot.children)}))},Me=function(t){var n=t.annotations,o=t.doc,a=t.outlines,i=t.page,c=t.pageIndex,u=t.plugins,l=t.rotation,s=t.scale,d=t.onExecuteNamedAction,p=t.onJumpFromLinkAnnotation,f=t.onJumpToDest,h=e.useRef(),g=i.getViewport({rotation:l,scale:s}).clone({dontFlip:!0}),v=n.filter((function(e){return!e.parentId}));return r((function(){var e=h.current;if(e){var t={annotations:v,container:e,pageIndex:c,rotation:l,scale:s},n=function(e){e.dependencies&&e.dependencies.forEach((function(e){n(e)})),e.onAnnotationLayerRender&&e.onAnnotationLayerRender(t)};u.forEach((function(e){n(e)}))}}),[]),e.createElement("div",{ref:h,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(c)},v.map((function(t){var r=n.find((function(e){return e.parentId===t.id}));switch(t.annotationType){case S.Caret:return e.createElement(U,{key:t.id,annotation:t,page:i,viewport:g});case S.Circle:return e.createElement(J,{key:t.id,annotation:t,page:i,viewport:g});case S.FileAttachment:return e.createElement(G,{key:t.id,annotation:t,page:i,viewport:g});case S.FreeText:return e.createElement(Y,{key:t.id,annotation:t,page:i,viewport:g});case S.Highlight:return e.createElement(K,{key:t.id,annotation:t,childAnnotation:r,page:i,viewport:g});case S.Ink:return e.createElement(X,{key:t.id,annotation:t,page:i,viewport:g});case S.Line:return e.createElement(Q,{key:t.id,annotation:t,page:i,viewport:g});case S.Link:return e.createElement(fe,{key:t.id,annotation:t,annotationContainerRef:h,doc:o,outlines:a,page:i,pageIndex:c,scale:s,viewport:g,onExecuteNamedAction:d,onJumpFromLinkAnnotation:p,onJumpToDest:f});case S.Polygon:return e.createElement(he,{key:t.id,annotation:t,page:i,viewport:g});case S.Polyline:return e.createElement(ge,{key:t.id,annotation:t,page:i,viewport:g});case S.Popup:return e.createElement(Z,{key:t.id,annotation:t,page:i,viewport:g});case S.Square:return e.createElement(ve,{key:t.id,annotation:t,page:i,viewport:g});case S.Squiggly:return e.createElement(me,{key:t.id,annotation:t,page:i,viewport:g});case S.Stamp:return e.createElement(we,{key:t.id,annotation:t,page:i,viewport:g});case S.StrikeOut:return e.createElement(be,{key:t.id,annotation:t,page:i,viewport:g});case S.Text:return e.createElement(Se,{key:t.id,annotation:t,childAnnotation:r,page:i,viewport:g});case S.Underline:return e.createElement(Le,{key:t.id,annotation:t,page:i,viewport:g});default:return e.createElement(e.Fragment,{key:t.id})}})))},Oe=function(){var t=e.useRef(!1);return e.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),t},Te=function(t){var n=e.useState(t),r=n[0],o=n[1],a=Oe();return[r,e.useCallback((function(e){a.current&&o(e)}),[a.current])]},Ie=function(t){var n=t.page,r=t.renderAnnotations,o=Te({loading:!0,annotations:[]}),a=o[0],i=o[1];return e.useEffect((function(){n.getAnnotations({intent:"display"}).then((function(e){i({loading:!1,annotations:e})}))}),[]),a.loading?e.createElement(e.Fragment,null):r(a.annotations)},Fe=function(t){var n=t.doc,r=t.outlines,o=t.page,a=t.pageIndex,i=t.plugins,c=t.rotation,u=t.scale,l=t.onExecuteNamedAction,s=t.onJumpFromLinkAnnotation,d=t.onJumpToDest;return e.createElement(Ie,{page:o,renderAnnotations:function(t){return e.createElement(Me,{annotations:t,doc:n,outlines:r,page:o,pageIndex:a,plugins:i,rotation:c,scale:u,onExecuteNamedAction:l,onJumpFromLinkAnnotation:s,onJumpToDest:d})}})},Ne=function(t){var n=t.size,r=void 0===n?"4rem":n,a=t.testId,i=e.useState(!1),c=i[0],l=i[1],s=a?{"data-testid":a}:{},d=o({onVisibilityChanged:function(e){l(e.isVisible)}});return e.createElement("div",u({},s,{className:N({"rpv-core__spinner":!0,"rpv-core__spinner--animating":c}),ref:d,style:{height:r,width:r}}))};!function(e){e.DualPage="DualPage",e.DualPageWithCover="DualPageWithCover",e.SinglePage="SinglePage"}($||($={})),function(e){e[e.PreRender=0]="PreRender",e[e.DidRender=1]="DidRender"}(ee||(ee={}));var De,He,Ae=function(e,t){var n=e%t;return 0===n?e:Math.floor(e-n)},ze=function(t){var n=t.canvasLayerRef,o=t.height,a=t.page,i=t.pageIndex,c=t.plugins,u=t.rotation,l=t.scale,s=t.width,d=t.onRenderCanvasCompleted,p=e.useRef();return r((function(){var e=p.current;e&&e.cancel();var t=n.current;t.removeAttribute("data-testid");var r={ele:t,pageIndex:i,rotation:u,scale:l,status:ee.PreRender},o=function(e){e.dependencies&&e.dependencies.forEach((function(e){return o(e)})),e.onCanvasLayerRender&&e.onCanvasLayerRender(r)};c.forEach((function(e){return o(e)}));var s=a.getViewport({rotation:u,scale:l}),f=window.devicePixelRatio||1,h=Math.sqrt(16777216/(s.width*s.height)),g=f>h;g?t.style.transform="scale(1, 1)":t.style.removeProperty("transform");var v=Math.min(h,f),m=function(e,t){var n,r;if(Math.floor(e)===e)return[e,1];var o=1/e;if(o>t)return[1,t];if(Math.floor(o)===o)return[1,o];for(var a=e>1?o:e,i=0,c=1,u=1,l=1;;){var s=i+u,d=c+l;if(d>t)break;a<=s/d?(u=(n=[s,d])[0],l=n[1]):(i=(r=[s,d])[0],c=r[1])}return a<(i/c+u/l)/2?a===e?[i,c]:[c,i]:a===e?[u,l]:[l,u]}(v,8),w=m[0],b=m[1];t.width=Ae(s.width*v,w),t.height=Ae(s.height*v,w),t.style.width="".concat(Ae(s.width,b),"px"),t.style.height="".concat(Ae(s.height,b),"px"),t.hidden=!0;var E=t.getContext("2d",{alpha:!1}),_=g||1!==f?[v,0,0,v,0,0]:null;return p.current=a.render({canvasContext:E,transform:_,viewport:s}),p.current.promise.then((function(){t.hidden=!1,t.setAttribute("data-testid","core__canvas-layer-".concat(i));var e={ele:t,pageIndex:i,rotation:u,scale:l,status:ee.DidRender},n=function(t){t.dependencies&&t.dependencies.forEach((function(e){return n(e)})),t.onCanvasLayerRender&&t.onCanvasLayerRender(e)};c.forEach((function(e){return n(e)})),d()}),(function(){d()})),function(){t&&(t.width=0,t.height=0)}}),[]),e.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(o,"px"),width:"".concat(s,"px")}},e.createElement("canvas",{ref:n}))},Be=e.createContext({}),Ve=function(t){var n=t.height,o=t.page,a=t.rotation,i=t.scale,c=t.width,u=e.useContext(Be).pdfJsApiProvider,l=e.useRef();return r((function(){var e=l.current,t=o.getViewport({rotation:a,scale:i});o.getOperatorList().then((function(r){!function(){var e=l.current;e&&(e.innerHTML="")}(),new u.SVGGraphics(o.commonObjs,o.objs).getSVG(r,t).then((function(t){t.style.height="".concat(n,"px"),t.style.width="".concat(c,"px"),e.appendChild(t)}))}))}),[]),e.createElement("div",{className:"rpv-core__svg-layer",ref:l})},We=function(t){var n=t.containerRef,o=t.page,a=t.pageIndex,i=t.plugins,c=t.rotation,u=t.scale,l=t.onRenderTextCompleted,s=e.useContext(Be).pdfJsApiProvider,d=e.useRef(),p=function(){var e=n.current;e&&([].slice.call(e.querySelectorAll(".rpv-core__text-layer-text")).forEach((function(t){return e.removeChild(t)})),[].slice.call(e.querySelectorAll('br[role="presentation"]')).forEach((function(t){return e.removeChild(t)})))};return r((function(){var e=d.current;e&&e.cancel();var t=n.current;if(t){t.removeAttribute("data-testid");var r=o.getViewport({rotation:c,scale:u}),f={ele:t,pageIndex:a,scale:u,status:ee.PreRender},h=function(e){e.dependencies&&e.dependencies.forEach((function(e){return h(e)})),e.onTextLayerRender&&e.onTextLayerRender(f)};return i.forEach((function(e){return h(e)})),o.getTextContent().then((function(e){p(),t.style.setProperty("--scale-factor","".concat(u)),d.current=s.renderTextLayer({container:t,textContent:e,textContentSource:e,viewport:r}),d.current.promise.then((function(){t.setAttribute("data-testid","core__text-layer-".concat(a)),[].slice.call(t.children).forEach((function(e){e.classList.contains("rpv-core__text-layer-text--not")||e.classList.add("rpv-core__text-layer-text")}));var e={ele:t,pageIndex:a,scale:u,status:ee.DidRender},n=function(t){t.dependencies&&t.dependencies.forEach((function(e){return n(e)})),t.onTextLayerRender&&t.onTextLayerRender(e)};i.forEach((function(e){return n(e)})),l()}),(function(){t.removeAttribute("data-testid"),l()}))})),function(){var e;p(),null===(e=d.current)||void 0===e||e.cancel()}}}),[]),e.createElement("div",{className:"rpv-core__text-layer",ref:n})},qe=function(t){var n=t.doc,r=t.measureRef,o=t.outlines,a=t.pageIndex,i=t.pageRotation,c=t.pageSize,u=t.plugins,l=t.renderPage,s=t.renderQueueKey,d=t.rotation,p=t.scale,f=t.shouldRender,h=t.viewMode,g=t.onExecuteNamedAction,v=t.onJumpFromLinkAnnotation,m=t.onJumpToDest,w=t.onRenderCompleted,b=t.onRotatePage,E=Oe(),_=Te(null),y=_[0],x=_[1],P=Te(!1),R=P[0],k=P[1],C=Te(!1),S=C[0],L=C[1],M=e.useRef(),O=e.useRef(),T=Math.abs(d+i)%180==0,I=c.pageWidth*p,F=c.pageHeight*p,D=T?I:F,H=T?F:I,A=(c.rotation+d+i)%360,z=e.useRef(0),B=l||function(t){return e.createElement(e.Fragment,null,t.canvasLayer.children,t.textLayer.children,t.annotationLayer.children)},V=function(t){return t.map((function(t,r){return e.createElement(e.Fragment,{key:r},t.dependencies&&V(t.dependencies),t.renderPageLayer&&t.renderPageLayer({canvasLayerRef:M,canvasLayerRendered:R,doc:n,height:H,pageIndex:a,rotation:A,scale:p,textLayerRef:O,textLayerRendered:S,width:D}))}))};return e.useEffect((function(){x(null),k(!1),L(!1)}),[i,d,p]),e.useEffect((function(){f&&E.current&&!y&&ie(n,a).then((function(e){z.current=s,x(e)}))}),[f,y]),e.useEffect((function(){R&&S&&(s!==z.current?(x(null),k(!1),L(!1)):w(a))}),[R,S]),e.createElement("div",{className:N({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":h===$.DualPage,"rpv-core__page-layer--dual-cover":h===$.DualPageWithCover,"rpv-core__page-layer--single":h===$.SinglePage}),"data-testid":"core__page-layer-".concat(a),ref:r,style:{height:"".concat(H,"px"),width:"".concat(D,"px")}},y?e.createElement(e.Fragment,null,B({annotationLayer:{attrs:{},children:e.createElement(Fe,{doc:n,outlines:o,page:y,pageIndex:a,plugins:u,rotation:A,scale:p,onExecuteNamedAction:g,onJumpFromLinkAnnotation:v,onJumpToDest:m})},canvasLayer:{attrs:{},children:e.createElement(ze,{canvasLayerRef:M,height:H,page:y,pageIndex:a,plugins:u,rotation:A,scale:p,width:D,onRenderCanvasCompleted:function(){k(!0)}})},canvasLayerRendered:R,doc:n,height:H,pageIndex:a,rotation:A,scale:p,svgLayer:{attrs:{},children:e.createElement(Ve,{height:H,page:y,rotation:A,scale:p,width:D})},textLayer:{attrs:{},children:e.createElement(We,{containerRef:O,page:y,pageIndex:a,plugins:u,rotation:A,scale:p,onRenderTextCompleted:function(){L(!0)}})},textLayerRendered:S,width:D,markRendered:w,onRotatePage:function(e){return b(a,e)}}),V(u)):e.createElement(Ne,{testId:"core__page-layer-loading-".concat(a)}))},je={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},Ue=e.createContext({l10n:je,setL10n:function(){}});!function(e){e.Backward="Backward",e.Forward="Forward"}(De||(De={})),function(e){e.Page="Page",e.Horizontal="Horizontal",e.Vertical="Vertical",e.Wrapped="Wrapped"}(He||(He={}));var Je,Ge=function(e,t){return e.reduce((function(e,n,r){return r%t?e[e.length-1].push(n):e.push([n]),e}),[])},Ye=function(e,t){var n=t.rect;return e.height!==n.height||e.width!==n.width?n:e};!function(e){e.Horizontal="Horizontal",e.Vertical="Vertical",e.Both="Both"}(Je||(Je={}));var Ze,Ke=function(e){return 1-Math.pow(1-e,4)},Xe=1e-4,Qe={left:0,top:0},$e={capture:!1,passive:!0},et=function(t){var n=t.elementRef,o=t.enableSmoothScroll,a=t.isRtl,i=t.scrollDirection,c=t.onSmoothScroll,u=e.useState(Qe),l=u[0],s=u[1],d=e.useState(n.current),p=d[0],f=d[1],h=a?-1:1,g=e.useRef(i);g.current=i;var v=e.useRef(Qe),m=e.useRef(!0),w=e.useCallback((function(){m.current=!0,o&&s(v.current),c(!1)}),[]),b=e.useCallback((function(){if(p){switch(g.current){case Je.Horizontal:v.current={left:h*p.scrollLeft,top:0};break;case Je.Both:v.current={left:h*p.scrollLeft,top:p.scrollTop};break;case Je.Vertical:default:v.current={left:0,top:p.scrollTop}}o&&!m.current||s(v.current)}}),[p]);r((function(){f(n.current)})),r((function(){if(p)return p.addEventListener("scroll",b,$e),function(){p.removeEventListener("scroll",b,$e)}}),[p]);var E=e.useCallback((function(e,t){var r=n.current;if(!r)return Promise.resolve();var o={left:0,top:0};switch(g.current){case Je.Horizontal:o.left=h*e.left;break;case Je.Both:o.left=h*e.left,o.top=e.top;break;case Je.Vertical:default:o.top=e.top}return t?(m.current=!1,c(!0),new Promise((function(e,t){!function(e,t,n,r,o,a){void 0===o&&(o=function(e){return e}),void 0===a&&(a=function(){});var i=0,c=0,u=!1;switch(t){case Je.Horizontal:c=e.scrollLeft,i=0;break;case Je.Both:c=e.scrollLeft,i=e.scrollTop;break;case Je.Vertical:default:c=0,i=e.scrollTop}var l=function(){u||(u=!0,e.scrollLeft=n.left,e.scrollTop=n.top,a())};if(Math.abs(i-n.top)<=Xe&&t===Je.Vertical)l();else if(Math.abs(c-n.left)<=Xe&&t===Je.Horizontal)l();else{var s,d=-1,p=c-n.left,f=i-n.top,h=function(a){-1===d&&(d=a);var g=a-d,v=Math.min(g/r,1),m=o(v),w={left:c-p*m,top:i-f*m};switch(t){case Je.Horizontal:e.scrollLeft=w.left;break;case Je.Both:e.scrollLeft=w.left,e.scrollTop=w.top;break;case Je.Vertical:default:e.scrollTop=w.top}Math.abs(w.top-n.top)<=Xe&&Math.abs(w.left-n.left)<=Xe&&!u&&(window.cancelAnimationFrame(s),l()),g<r?s=window.requestAnimationFrame(h):window.cancelAnimationFrame(s)};s=window.requestAnimationFrame(h)}}(r,g.current,o,400,Ke,(function(){w(),e()}))}))):new Promise((function(e,t){switch(g.current){case Je.Horizontal:r.scrollLeft=o.left;break;case Je.Both:r.scrollLeft=o.left,r.scrollTop=o.top;break;case Je.Vertical:default:r.scrollTop=o.top}e()}))}),[n.current]);return{scrollOffset:l,scrollTo:E}},tt=function(e,t,n){return Math.max(e,Math.min(n,t))},nt=function(e,t){if(t!==$.DualPageWithCover)return 0;if(!function(e){var t=e.length;if(1===t)return!1;for(var n=1;n<t;n++)if(e[n].height!==e[0].height||e[n].width!==e[0].width)return!0;return!1}(e))return 2*e[0].width;var n=Ge(e.slice(1),2).map((function(e){return 2===e.length?e[0].width+e[1].width:e[0].width})),r=[e[0].width].concat(n);return Math.max.apply(Math,r)},rt={left:0,top:0},ot={left:0,top:0},at={left:0,top:0},it={left:0,top:0},ct={height:0,width:0},ut={left:0,top:0},lt="data-virtual-index",st=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],dt=function(t){var n=t.enableSmoothScroll,o=t.isRtl,a=t.numberOfItems,i=t.parentRef,c=t.setRenderRange,s=t.sizes,d=t.scrollMode,p=t.viewMode,f=t.onVisibilityChanged,h=e.useState(!1),g=h[0],v=h[1],m=e.useCallback((function(e){return v(e)}),[]),w=e.useRef(d);w.current=d;var b=e.useRef(p);b.current=p;var E=d===He.Wrapped||p===$.DualPageWithCover||p===$.DualPage?Je.Both:d===He.Horizontal?Je.Horizontal:Je.Vertical,_=et({elementRef:i,enableSmoothScroll:n,isRtl:o,scrollDirection:E,onSmoothScroll:m}),y=_.scrollOffset,x=_.scrollTo,P=function(t){var n=t.elementRef,o=e.useState(n.current),a=o[0],i=o[1],c=e.useRef(!1),u=e.useReducer(Ye,{height:0,width:0}),l=u[0],s=u[1];return r((function(){n.current!==a&&i(n.current)})),r((function(){if(a&&!c.current){c.current=!0;var e=a.getBoundingClientRect(),t=e.height,n=e.width;s({rect:{height:t,width:n}})}}),[a]),e.useEffect((function(){if(a){var e=new ResizeObserver((function(e,t){e.forEach((function(e){if(e.target===a){var t=e.contentRect,n=t.height,r=t.width;s({rect:{height:n,width:r}})}}))}));return e.observe(a),function(){e.unobserve(a)}}}),[a]),l}({elementRef:i}),R=e.useRef({scrollOffset:ut,measurements:[]});R.current.scrollOffset=y;var k=e.useMemo((function(){return Array(a).fill(-1)}),[]),C=e.useState(k),S=C[0],L=C[1],M=e.useMemo((function(){return new IntersectionObserver((function(e){e.forEach((function(e){var t=e.isIntersecting?e.intersectionRatio:-1,n=e.target.getAttribute(lt);if(n){var r=parseInt(n,10);0<=r&&r<a&&(f(r,t),L((function(e){return e[r]=t,l([],e,!0)})))}}))}),{threshold:st})}),[]),O=e.useMemo((function(){return d===He.Page&&p===$.SinglePage?function(e,t,n){for(var r=[],o=0;o<e;o++){var a={height:Math.max(t.height,n[o].height),width:Math.max(t.width,n[o].width)},i=0===o?it:r[o-1].end,c={left:i.left+a.width,top:i.top+a.height};r[o]={index:o,start:i,size:a,end:c,visibility:-1}}return r}(a,P,s):p===$.DualPageWithCover?function(e,t,n,r){for(var o=[],a=0,i=0,c=at,u=0;u<e;u++){var l=0===u?{height:r===He.Page?Math.max(t.height,n[u].height):n[u].height,width:r===He.Page?Math.max(t.width,n[u].width):n[u].width}:{height:r===He.Page?Math.max(t.height,n[u].height):n[u].height,width:Math.max(t.width/2,n[u].width)};r===He.Page?c=0===u?at:{left:u%2==0?l.width:0,top:Math.floor((u-1)/2)*l.height+o[0].end.top}:0===u?(c=at,a=n[0].height,i=0):u%2==1?(c={left:0,top:a+=i},i=u===e-1?n[u].height:Math.max(n[u].height,n[u+1].height)):c={left:o[u-1].end.left,top:a};var s={left:c.left+l.width,top:c.top+l.height};o[u]={index:u,start:c,size:l,end:s,visibility:-1}}return o}(a,P,s,d):p===$.DualPage?function(e,t,n,r){for(var o=[],a=0,i=0,c=ot,u=0;u<e;u++){var l={height:r===He.Page?Math.max(t.height,n[u].height):n[u].height,width:Math.max(t.width/2,n[u].width)};r===He.Page?c={left:u%2==0?0:l.width,top:Math.floor(u/2)*l.height}:u%2==0?(c={left:0,top:a+=i},i=u===e-1?n[u].height:Math.max(n[u].height,n[u+1].height)):c={left:o[u-1].end.left,top:a};var s={left:c.left+l.width,top:c.top+l.height};o[u]={index:u,start:c,size:l,end:s,visibility:-1}}return o}(a,P,s,d):function(e,t,n,r){for(var o=[],a=0,i={left:0,top:0},c=0,u=rt,l=0;l<e;l++){var s=n[l];if(0===l)a=s.width,i={left:0,top:0},c=s.height;else switch(r){case He.Wrapped:(a+=s.width)<t.width?(u={left:o[l-1].end.left,top:i.top},c=Math.max(c,s.height)):(a=s.width,i={left:(u={left:i.left,top:i.top+c}).left,top:u.top},c=s.height);break;case He.Horizontal:case He.Vertical:default:u=o[l-1].end}var d={left:u.left+s.width,top:u.top+s.height};o[l]={index:l,start:u,size:s,end:d,visibility:-1}}return o}(a,P,s,d)}),[d,s,p,P]),T=O[a-1]?{height:O[a-1].end.top,width:O[a-1].end.left}:ct;R.current.measurements=O;var I=e.useMemo((function(){var e=function(e,t,n,r){var o=0;switch(e){case Je.Horizontal:o=r.left;break;case Je.Vertical:default:o=r.top}var a=t.length-1,i=function(e,t,n,r){for(;e<=t;){var o=(e+t)/2|0,a=r(o);if(a<n)e=o+1;else{if(!(a>n))return o;t=o-1}}return e>0?e-1:0}(0,a,o,(function(n){switch(e){case Je.Horizontal:return t[n].start.left;case Je.Both:case Je.Vertical:default:return t[n].start.top}}));if(e===Je.Both)for(var c=t[i].start.top;i-1>=0&&t[i-1].start.top===c&&t[i-1].start.left>=r.left;)i--;for(var u=i;u<=a;){var l={top:t[u].start.top-r.top,left:t[u].start.left-r.left},s={height:n.height-l.top,width:n.width-l.left};if(e===Je.Horizontal&&s.width<0)break;if(e===Je.Vertical&&s.height<0)break;if(e===Je.Both&&(s.width<0||s.height<0))break;u++}return{start:i,end:u}}(E,O,P,y),t=e.start,n=e.end,r=S.slice(tt(0,a,t),tt(0,a,n)),o=t+r.reduce((function(e,t,n,r){return t>r[e]?n:e}),0),i=o=tt(0,a-1,o),u=c({endPage:n,numPages:a,startPage:t}),l=u.startPage,s=u.endPage;switch(l=Math.max(l,0),s=Math.min(s,a-1),p){case $.DualPageWithCover:o>0&&(i=o%2==1?o:o-1),l=0===l?0:l%2==1?l:l-1,a-(s=s%2==1?s-1:s)<=2&&(s=a-1);break;case $.DualPage:i=o%2==0?o:o-1,l=l%2==0?l:l-1,s=s%2==1?s:s-1;break;case $.SinglePage:default:i=o}return{startPage:l,endPage:s,maxVisbilityIndex:i}}),[O,P,y,p,S]),F=I.startPage,N=I.endPage,D=I.maxVisbilityIndex,H=e.useMemo((function(){for(var e=[],t=function(t){var n=O[t],r=u(u({},n),{visibility:void 0!==S[t]?S[t]:-1,measureRef:function(e){e&&(e.setAttribute(lt,"".concat(t)),M.observe(e))}});e.push(r)},n=F;n<=N;n++)t(n);return e}),[F,N,S,O]),A=e.useCallback((function(e,t){var r=R.current.measurements[tt(0,a-1,e)],o=w.current===He.Page?ut:t;return r?x({left:o.left+r.start.left,top:o.top+r.start.top},n):Promise.resolve()}),[x,n]),z=e.useCallback((function(e,t){var n=R.current.measurements,r=n[e].start,o=n.find((function(e){return e.start.top-r.top>1e-12}));if(!o)return Promise.resolve();var a=o.index;switch(b.current){case $.DualPage:a=a%2==0?a:a+1;break;case $.DualPageWithCover:a=a%2==1?a:a+1}return A(a,t)}),[]),B=e.useCallback((function(e,t){for(var n=R.current.measurements,r=n[e].start,o=e,i=!1,c=a-1;c>=0;c--)if(r.top-n[c].start.top>1e-12){i=!0,o=n[c].index;break}if(!i)return Promise.resolve();switch(b.current){case $.DualPage:o=o%2==0?o:o-1;break;case $.DualPageWithCover:o=o%2==0?o-1:o}return o===e&&(o=e-1),A(o,t)}),[]),V=e.useCallback((function(e,t){if(b.current===$.DualPageWithCover||b.current===$.DualPage)return z(e,t);switch(w.current){case He.Wrapped:return z(e,t);case He.Horizontal:case He.Vertical:default:return A(e+1,t)}}),[]),W=e.useCallback((function(e,t){if(b.current===$.DualPageWithCover||b.current===$.DualPage)return B(e,t);switch(w.current){case He.Wrapped:return B(e,t);case He.Horizontal:case He.Vertical:default:return A(e-1,t)}}),[]),q=e.useCallback((function(){return function(e,t){switch(t){case He.Horizontal:return{position:"relative",height:"100%",width:"".concat(e.width,"px")};case He.Vertical:default:return{position:"relative",height:"".concat(e.height,"px"),width:"100%"}}}(T,w.current)}),[T]),j=e.useCallback((function(e){return function(e,t,n){return n!==He.Page?{}:{height:"".concat(t.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(e.start.top,"px)")}}(e,P,w.current)}),[P]),U=e.useCallback((function(e){return function(e,t,n,r,o){var a,i,c,u,l,s,d,p=t?"right":"left",f=t?-1:1,h=n.length,g=e.start.left*f,v=e.size,m=v.height,w=v.width;if(r===$.DualPageWithCover){var b=o===He.Page?0:e.start.top;return 0===e.index||h%2==0&&e.index===h-1?((a={height:"".concat(m,"px"),minWidth:"".concat(nt(n,r),"px"),width:"100%"})[p]=0,a.position="absolute",a.top=0,a.transform="translate(".concat(g,"px, ").concat(b,"px)"),a):((i={height:"".concat(m,"px"),width:"".concat(w,"px")})[p]=0,i.position="absolute",i.top=0,i.transform="translate(".concat(g,"px, ").concat(b,"px)"),i)}if(r===$.DualPage)return(c={height:"".concat(m,"px"),width:"".concat(w,"px")})[p]=0,c.position="absolute",c.top=0,c.transform="translate(".concat(g,"px, ").concat(o===He.Page?0:e.start.top,"px)"),c;switch(o){case He.Horizontal:return(u={height:"100%",width:"".concat(w,"px")})[p]=0,u.position="absolute",u.top=0,u.transform="translateX(".concat(g,"px)"),u;case He.Page:return(l={height:"".concat(m,"px"),width:"".concat(w,"px")})[p]=0,l.position="absolute",l.top=0,l;case He.Wrapped:return(s={height:"".concat(m,"px"),width:"".concat(w,"px")})[p]=0,s.position="absolute",s.top=0,s.transform="translate(".concat(g,"px, ").concat(e.start.top,"px)"),s;case He.Vertical:default:return(d={height:"".concat(m,"px"),width:"100%"})[p]=0,d.position="absolute",d.top=0,d.transform="translateY(".concat(e.start.top,"px)"),d}}(e,o,s,b.current,w.current)}),[o,s]),J=e.useCallback((function(e,t){var n=R.current,r=n.measurements,o=n.scrollOffset,i=r[tt(0,a-1,t)];if(i){var c=w.current===He.Page?{left:i.start.left,top:i.start.top}:{left:o.left*e,top:o.top*e};return x(c,!1)}return Promise.resolve()}),[]);return e.useEffect((function(){return function(){M.disconnect()}}),[]),{boundingClientRect:P,isSmoothScrolling:g,startPage:F,endPage:N,maxVisbilityIndex:D,virtualItems:H,getContainerStyles:q,getItemContainerStyles:j,getItemStyles:U,scrollToItem:A,scrollToNextItem:V,scrollToPreviousItem:W,zoom:J}},pt=function(e,t,n,r,o,a){var i=n;switch(!0){case o===$.DualPageWithCover&&a>=3:case o===$.DualPage&&a>=3:i=2*n;break;default:i=n}switch(r){case q.ActualSize:return 1;case q.PageFit:return Math.min((e.clientWidth-17)/i,(e.clientHeight-16)/t);case q.PageWidth:return(e.clientWidth-17)/i}},ft=function(t){var n,r,o=t.getCurrentPage,a=(n=50,r=e.useRef([]),e.useEffect((function(){return function(){r.current=[]}}),[]),{push:function(e){var t=r.current;t.length+1>n&&t.shift(),t.push(e),r.current=t},map:function(e){return r.current.map((function(t){return e(t)}))},pop:function(){var e=r.current;if(0===e.length)return null;var t=e.pop();return r.current=e,t}}),i=function(t){var n=e.useRef([]);return e.useEffect((function(){return function(){n.current=[]}}),[]),{dequeue:function(){var e=n.current;if(0===e.length)return null;var t=e.shift();return n.current=e,t||null},enqueue:function(e){var r=n.current;r.length+1>t&&r.pop(),n.current=[e].concat(r)},map:function(e){return n.current.map((function(t){return e(t)}))}}}(50),c=function(){var e=i.dequeue();return e&&a.push(e),e&&e.pageIndex===o()?c():e},u=function(){var e=a.pop();return e&&i.enqueue(e),e&&e.pageIndex===o()?u():e},l=e.useCallback((function(e){a.push(e)}),[]);return{getNextDestination:c,getPreviousDestination:u,markVisitedDestination:l}},ht=function(e){var t=[];return e.map((function(e){t=t.concat(e).concat(function(e){var t=[];return e.items&&e.items.length>0&&(t=t.concat(ht(e.items))),t}(e))})),t},gt={buildPageStyles:function(){return{}},transformSize:function(e){return e.size}},vt={left:0,top:0},mt=function(t){var n=t.currentFile,o=t.defaultScale,a=t.doc,i=t.enableSmoothScroll,c=t.estimatedPageSizes,l=t.initialPage,d=t.initialRotation,f=t.initialScale,h=t.initialScrollMode,g=t.initialViewMode,v=t.pageLayout,m=t.plugins,w=t.renderPage,b=t.setRenderRange,E=t.viewerState,_=t.onDocumentLoad,y=t.onOpenFile,x=t.onPageChange,P=t.onRotate,R=t.onRotatePage,S=t.onZoom,L=a.numPages,O=a.loadingTask.docId,I=e.useContext(Ue).l10n,D=e.useContext(F),H=D.direction===M.RightToLeft,A=e.useRef(),z=e.useRef(),B=ft({getCurrentPage:function(){return J.current.pageIndex}}),V=e.useState(!1),W=V[0],j=V[1],U=function(t){var n=Te([]),r=n[0],o=n[1];return e.useEffect((function(){t.getOutline().then((function(e){if(null!==e){var t=ht(e);o(t)}}))}),[]),r}(a),J=e.useRef(E),G=e.useRef("string"==typeof o?o:null),Y=e.useRef({targetPage:-1,zoomRatio:1}),Z=e.useRef(-1),K=e.useRef(l),X=k({targetRef:z}),Q=e.useState(-1),ee=Q[0],te=Q[1],oe=e.useState(0),ae=oe[0],ce=oe[1],ue=T({doc:a});e.useEffect((function(){return function(){ne.clear(),re.clear()}}),[O]);var le=e.useMemo((function(){return Object.assign({},gt,v)}),[]),se=e.useState(!1),de=se[0],pe=se[1],fe=e.useState(c),he=fe[0],ge=fe[1],ve=e.useState(0),me=ve[0],we=ve[1],be=e.useState(new Map),Ee=be[0],_e=be[1],ye=e.useState(d),xe=ye[0],Pe=ye[1],Re=e.useState(f),ke=Re[0],Ce=Re[1],Se=e.useState(h),Le=Se[0],Me=Se[1],Oe=e.useState(g),Ie=Oe[0],Fe=Oe[1],Ne=e.useMemo((function(){return Array(L).fill(0).map((function(e,t){var n=he[t].pageHeight,r=he[t].pageWidth,o=Math.abs(xe)%180==0?{height:n,width:r}:{height:r,width:n},a={height:o.height*ke,width:o.width*ke};return le.transformSize({numPages:L,pageIndex:t,size:a})}))}),[xe,ke,he]),Ae=e.useCallback((function(e,t){ue.setVisibility(e,t)}),[]),ze=dt({enableSmoothScroll:i,isRtl:H,numberOfItems:L,parentRef:z,scrollMode:Le,setRenderRange:b,sizes:Ne,viewMode:Ie,onVisibilityChanged:Ae}),Be=p((function(){!G.current||J.current.fullScreenMode!==s.Normal||l>0&&K.current===l||ot(G.current)}),200);!function(e){var t=e.targetRef,n=e.onResize;r((function(){var e=new ResizeObserver((function(e){e.forEach((function(e){n(e.target)}))})),r=t.current;if(r)return e.observe(r),function(){e.unobserve(r)}}),[])}({targetRef:z,onResize:Be});var Ve=function(e){var t=e,n=function(e){e.dependencies&&e.dependencies.forEach((function(e){return n(e)})),e.onViewerStateChange&&(t=e.onViewerStateChange(t))};m.forEach((function(e){return n(e)})),J.current=t},We=function(){return z.current},je=function(){return J.current},Je=e.useCallback((function(e){return B.markVisitedDestination(e),lt(e)}),[]),Ye=e.useCallback((function(){var e=B.getNextDestination();return e?lt(e):Promise.resolve()}),[]),Ze=e.useCallback((function(){var e=B.getPreviousDestination();return e?lt(e):Promise.resolve()}),[]),Ke=e.useCallback((function(){return ze.scrollToNextItem(J.current.pageIndex,vt)}),[]),Xe=e.useCallback((function(e){return 0<=e&&e<L?new Promise((function(t){ze.scrollToItem(e,vt).then((function(){te(e),t()}))})):Promise.resolve()}),[]),Qe=e.useCallback((function(){return ze.scrollToPreviousItem(J.current.pageIndex,vt)}),[]),$e=e.useCallback((function(e){var t,n;"pdf"===(t=e.name,n=t.split(/\./).pop(),n?n.toLowerCase():"").toLowerCase()&&new Promise((function(t){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(){var e=new Uint8Array(n.result);t(e)}})).then((function(t){y(e.name,t)}))}),[y]),et=e.useCallback((function(e){var t=J.current.rotation,n=e===De.Backward?-90:90,r=360===t||-360===t?n:t+n;ue.markNotRendered(),Pe(r),Ve(u(u({},J.current),{rotation:r})),P({direction:e,doc:a,rotation:r}),Y.current={targetPage:J.current.pageIndex,zoomRatio:1}}),[]),tt=e.useCallback((function(e,t){var n=t===De.Backward?-90:90,r=J.current.pagesRotation,o=(r.has(e)?r.get(e):d)+n,i=r.set(e,o);j((function(e){return!e})),_e(i),Ve(u(u({},J.current),{pagesRotation:i,rotatedPage:e})),R({direction:t,doc:a,pageIndex:e,rotation:o}),ue.markRendering(e),te(e)}),[]),nt=e.useCallback((function(e){ue.markNotRendered(),Me(e),Ve(u(u({},J.current),{scrollMode:e})),Y.current={targetPage:J.current.pageIndex,zoomRatio:1}}),[]),rt=e.useCallback((function(e){ue.markNotRendered(),Fe(e),Ve(u(u({},J.current),{viewMode:e})),Y.current={targetPage:J.current.pageIndex,zoomRatio:1}}),[]),ot=e.useCallback((function(e){var t=z.current,n=J.current.pageIndex;if(!(n<0||n>=L)){var r=he[n].pageHeight,o=he[n].pageWidth,i=t?"string"==typeof e?pt(t,r,o,e,J.current.viewMode,L):e:1;if(G.current="string"==typeof e?e:null,i!==J.current.scale){ce((function(e){return e+1})),ue.markNotRendered();var c=J.current.scale;Ve(u(u({},J.current),{scale:i})),Ce(i),S({doc:a,scale:i}),Y.current={targetPage:n,zoomRatio:i/c}}}}),[]),at=e.useCallback((function(e){Y.current={targetPage:J.current.pageIndex,zoomRatio:1},X.enterFullScreenMode(e)}),[]),it=e.useCallback((function(){Y.current={targetPage:J.current.pageIndex,zoomRatio:1},X.exitFullScreenMode()}),[]);e.useEffect((function(){Ve(u(u({},J.current),{fullScreenMode:X.fullScreenMode}))}),[X.fullScreenMode]);var ct=e.useCallback((function(e){if(ue.markRendered(e),!de){var t=Array(a.numPages).fill(0).map((function(e,t){return new Promise((function(e){ie(a,t).then((function(t){var n=t.getViewport({scale:1});e({pageHeight:n.height,pageWidth:n.width,rotation:n.rotation})}))}))}));Promise.all(t).then((function(e){pe(!0),ge(e),0!==l&&Xe(l)}))}}),[de]),ut=e.useCallback((function(e){B.markVisitedDestination(e)}),[]),lt=e.useCallback((function(e){var t=e.pageIndex,n=e.bottomOffset,r=e.leftOffset,o=e.scaleTo,i=z.current,c=J.current;return i&&c?new Promise((function(e,u){ie(a,t).then((function(a){var u=a.getViewport({scale:1}),l=0,s=("function"==typeof n?n(u.width,u.height):n)||0,d=("function"==typeof r?r(u.width,u.height):r)||0,p=c.scale;switch(o){case q.PageFit:l=0,d=0,ot(q.PageFit);break;case q.PageWidth:p=pt(i,he[t].pageHeight,he[t].pageWidth,q.PageWidth,Ie,L),l=(u.height-s)*p,d*=p,ot(p);break;default:l=(u.height-s)*p,d*=p}switch(c.scrollMode){case He.Horizontal:ze.scrollToItem(t,{left:d,top:0}).then((function(){e()}));break;case He.Vertical:default:ze.scrollToItem(t,{left:0,top:l}).then((function(){e()}))}}))})):Promise.resolve()}),[he]);e.useEffect((function(){var e={enterFullScreenMode:at,exitFullScreenMode:it,getPagesContainer:We,getViewerState:je,jumpToDestination:Je,jumpToNextDestination:Ye,jumpToPreviousDestination:Ze,jumpToNextPage:Ke,jumpToPreviousPage:Qe,jumpToPage:Xe,openFile:$e,rotate:et,rotatePage:tt,setViewerState:Ve,switchScrollMode:nt,switchViewMode:rt,zoom:ot},t=function(n){n.dependencies&&n.dependencies.forEach((function(e){return t(e)})),n.install&&n.install(e)},n=function(t){t.dependencies&&t.dependencies.forEach((function(e){return n(e)})),t.uninstall&&t.uninstall(e)};return m.forEach((function(e){return t(e)})),function(){m.forEach((function(e){return n(e)}))}}),[O]),e.useEffect((function(){var e={doc:a,file:n};_(e);var t=function(n){n.dependencies&&n.dependencies.forEach((function(e){return t(e)})),n.onDocumentLoad&&n.onDocumentLoad(e)};m.forEach((function(e){return t(e)}))}),[O]),e.useEffect((function(){X.fullScreenMode===s.Entered&&G.current&&(Z.current=J.current.pageIndex,ot(G.current))}),[X.fullScreenMode]);var st=function(e){var t=me-1,n=me+1;switch(e){case"FirstPage":Xe(0);break;case"LastPage":Xe(L-1);break;case"NextPage":n<L&&Xe(n);break;case"PrevPage":t>=0&&Xe(t)}};e.useEffect((function(){if(X.fullScreenMode!==s.Entering&&X.fullScreenMode!==s.Exitting&&!ze.isSmoothScrolling){var e=ze.startPage,t=ze.endPage,n=ze.maxVisbilityIndex,r=X.fullScreenMode===s.Entered;if(!(r&&n!==Y.current.targetPage&&Y.current.targetPage>-1||r&&n!==Z.current&&Z.current>-1)){var o=J.current.pageIndex;we(n),Ve(u(u({},J.current),{pageIndex:n})),n===o||ze.isSmoothScrolling||x({currentPage:n,doc:a}),ue.setRange(e,t)}}}),[ze.startPage,ze.endPage,ze.isSmoothScrolling,ze.maxVisbilityIndex,X.fullScreenMode,W,xe,ke]);var mt=C((function(){if(J.current.fullScreenMode!==s.Entering&&J.current.fullScreenMode!==s.Exitting){var e=Y.current,t=e.targetPage,n=e.zoomRatio;if(-1===t){var r=ue.getHighestPriorityPage();r>-1&&ue.isInRange(r)&&(ue.markRendering(r),te(r))}else{(1===n?Xe(t):ze.zoom(n,t)).then((function(){Y.current={targetPage:-1,zoomRatio:1}}))}}}),!0,[])[0];e.useEffect((function(){mt()}),[]);var wt=e.useCallback((function(t){return e.createElement("div",u({},t.attrs,{style:t.attrs&&t.attrs.style?t.attrs.style:{}}),t.children,t.subSlot&&wt(t.subSlot))}),[]);return wt(function(){var t=ze.virtualItems,n=[];switch(Ie){case $.DualPage:n=Ge(t,2);break;case $.DualPageWithCover:t.length&&(n=0===t[0].index?[[t[0]]].concat(Ge(t.slice(1),2)):Ge(t,2));break;case $.SinglePage:default:n=Ge(t,1)}var r=I&&I.core?I.core.pageLabel:"Page {{pageIndex}}",o={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:A,style:{height:"100%"}},children:e.createElement(e.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:N({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Le===He.Horizontal,"rpv-core__inner-pages--rtl":H,"rpv-core__inner-pages--single":Le===He.Page,"rpv-core__inner-pages--vertical":Le===He.Vertical,"rpv-core__inner-pages--wrapped":Le===He.Wrapped}),ref:z,style:{height:"100%",position:"relative"}},children:e.createElement("div",{"data-testid":"core__inner-current-page-".concat(me),style:Object.assign({"--scale-factor":ke},ze.getContainerStyles())},n.map((function(t){return e.createElement("div",{className:N({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Le===He.Page}),style:ze.getItemContainerStyles(t[0]),key:"".concat(t[0].index,"-").concat(Ie,"-").concat(Le)},t.map((function(t){var n=Ie===$.DualPageWithCover&&(0===t.index||L%2==0&&t.index===L-1);return e.createElement("div",{"aria-label":r.replace("{{pageIndex}}","".concat(t.index+1)),className:N({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Ie===$.DualPage&&t.index%2==0,"rpv-core__inner-page--dual-odd":Ie===$.DualPage&&t.index%2==1,"rpv-core__inner-page--dual-cover":n,"rpv-core__inner-page--dual-cover-even":Ie===$.DualPageWithCover&&!n&&t.index%2==0,"rpv-core__inner-page--dual-cover-odd":Ie===$.DualPageWithCover&&!n&&t.index%2==1,"rpv-core__inner-page--single":Ie===$.SinglePage&&Le===He.Page}),role:"region",key:"".concat(t.index,"-").concat(Ie),style:Object.assign({},ze.getItemStyles(t),le.buildPageStyles({numPages:L,pageIndex:t.index,scrollMode:Le,viewMode:Ie}))},e.createElement(qe,{doc:a,measureRef:t.measureRef,outlines:U,pageIndex:t.index,pageRotation:Ee.has(t.index)?Ee.get(t.index):0,pageSize:he[t.index],plugins:m,renderPage:w,renderQueueKey:ae,rotation:xe,scale:ke,shouldRender:ee===t.index,viewMode:Ie,onExecuteNamedAction:st,onJumpFromLinkAnnotation:ut,onJumpToDest:Je,onRenderCompleted:ct,onRotatePage:tt}))})))})))}},i={containerRef:A,doc:a,pagesContainerRef:z,pagesRotation:Ee,pageSizes:he,rotation:xe,slot:o,themeContext:D,jumpToPage:Xe,openFile:$e,rotate:et,rotatePage:tt,switchScrollMode:nt,switchViewMode:rt,zoom:ot},c=function(e){e.dependencies&&e.dependencies.forEach((function(e){return c(e)})),e.renderViewer&&(o=e.renderViewer(u(u({},i),{slot:o})))};return m.forEach((function(e){return c(e)})),o}())},wt=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],bt=function(t){var n=t.defaultScale,r=t.doc,o=t.render,a=t.scrollMode,i=t.viewMode,c=e.useRef(),u=e.useState({estimatedPageSizes:[],scale:0}),l=u[0],s=u[1];return e.useLayoutEffect((function(){ie(r,0).then((function(e){var t=e.getViewport({scale:1}),o=c.current;if(o){var u=t.width,l=t.height,d=o.parentElement,p=(d.clientWidth-45)/u,f=(d.clientHeight-45)/l,h=p;switch(a){case He.Horizontal:h=Math.min(p,f);break;case He.Vertical:default:h=p}var g,v,m=n?"string"==typeof n?pt(d,l,u,n,i,r.numPages):n:(g=h,-1===(v=wt.findIndex((function(e){return e>=g})))||0===v?g:wt[v-1]),w=Array(r.numPages).fill(0).map((function(e){return{pageHeight:t.height,pageWidth:t.width,rotation:t.rotation}}));s({estimatedPageSizes:w,scale:m})}}))}),[r.loadingTask.docId]),0===l.estimatedPageSizes.length||0===l.scale?e.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:c},e.createElement(Ne,null)):o(l.estimatedPageSizes,l.scale)};!function(e){e.RequiredPassword="RequiredPassword",e.WrongPassword="WrongPassword"}(Ze||(Ze={}));var Et,_t=function(){},yt=function(e){function t(t,n){var r=e.call(this)||this;return r.verifyPassword=t,r.passwordStatus=n,r}return c(t,e),t}(_t),xt=function(t){var n=t.children,r=t.testId,o=t.onClick,a=e.useContext(F).direction===M.RightToLeft,i=r?{"data-testid":r}:{};return e.createElement("button",u({className:N({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":a}),type:"button",onClick:o},i),n)},Pt=function(t){var n=t.ariaLabel,o=void 0===n?"":n,a=t.autoFocus,i=void 0!==a&&a,c=t.placeholder,l=void 0===c?"":c,s=t.testId,d=t.type,p=void 0===d?"text":d,f=t.value,h=void 0===f?"":f,g=t.onChange,v=t.onKeyDown,m=void 0===v?function(){}:v,w=e.useContext(F).direction,b=e.useRef(),E=w===M.RightToLeft,_={ref:b,"data-testid":"","aria-label":o,className:N({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":E}),placeholder:l,value:h,onChange:function(e){return g(e.target.value)},onKeyDown:m};return s&&(_["data-testid"]=s),r((function(){if(i){var e=b.current;if(e){var t=window.scrollX,n=window.scrollY;e.focus(),window.scrollTo(t,n)}}}),[]),"text"===p?e.createElement("input",u({type:"text"},_)):e.createElement("input",u({type:"password"},_))},Rt=function(t){var n=t.passwordStatus,r=t.renderProtectedView,o=t.verifyPassword,a=t.onDocumentAskPassword,i=e.useContext(Ue).l10n,c=e.useState(""),u=c[0],l=c[1],s=e.useContext(F).direction===M.RightToLeft,d=function(){return o(u)};return e.useEffect((function(){a&&a({verifyPassword:o})}),[]),r?r({passwordStatus:n,verifyPassword:o}):e.createElement("div",{className:"rpv-core__asking-password-wrapper"},e.createElement("div",{className:N({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":s})},e.createElement("div",{className:"rpv-core__asking-password-message"},n===Ze.RequiredPassword&&i.core.askingPassword.requirePasswordToOpen,n===Ze.WrongPassword&&i.core.wrongPassword.tryAgain),e.createElement("div",{className:"rpv-core__asking-password-body"},e.createElement("div",{className:N({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!s,"rpv-core__asking-password-input--rtl":s})},e.createElement(Pt,{testId:"core__asking-password-input",type:"password",value:u,onChange:l,onKeyDown:function(e){"Enter"===e.key&&d()}})),e.createElement(xt,{onClick:d},i.core.askingPassword.submit))))},kt=function(e){function t(t){var n=e.call(this)||this;return n.doc=t,n}return c(t,e),t}(_t),Ct=function(e){function t(t){var n=e.call(this)||this;return n.error=t,n}return c(t,e),t}(_t),St=function(e){function t(t){var n=e.call(this)||this;return n.percentages=t,n}return c(t,e),t}(_t),Lt=function(t){var n=t.characterMap,r=t.file,o=t.httpHeaders,a=t.render,i=t.renderError,c=t.renderLoader,u=t.renderProtectedView,l=t.transformGetDocumentParams,s=t.withCredentials,d=t.onDocumentAskPassword,p=e.useContext(Be).pdfJsApiProvider,f=e.useContext(F).direction===M.RightToLeft,h=Te(new St(0)),g=h[0],v=h[1],m=e.useRef("");return e.useEffect((function(){m.current="",v(new St(0));var e=new p.PDFWorker({name:"PDFWorker_".concat(Date.now())}),t=Object.assign({httpHeaders:o,withCredentials:s,worker:e},"string"==typeof r?{url:r}:{data:r},n?{cMapUrl:n.url,cMapPacked:n.isCompressed}:{}),a=l?l(t):t,i=p.getDocument(a);return i.onPassword=function(e,t){switch(t){case p.PasswordResponses.NEED_PASSWORD:v(new yt(e,Ze.RequiredPassword));break;case p.PasswordResponses.INCORRECT_PASSWORD:v(new yt(e,Ze.WrongPassword))}},i.onProgress=function(e){var t=e.total>0?Math.min(100,100*e.loaded/e.total):100;""===m.current&&v(new St(t))},i.promise.then((function(e){m.current=e.loadingTask.docId,v(new kt(e))}),(function(t){return!e.destroyed&&v(new Ct({message:t.message||"Cannot load document",name:t.name}))})),function(){i.destroy(),e.destroy()}}),[r]),g instanceof yt?e.createElement(Rt,{passwordStatus:g.passwordStatus,renderProtectedView:u,verifyPassword:g.verifyPassword,onDocumentAskPassword:d}):g instanceof kt?a(g.doc):g instanceof Ct?i?i(g.error):e.createElement("div",{className:N({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":f})},e.createElement("div",{className:"rpv-core__doc-error-text"},g.error.message)):e.createElement("div",{"data-testid":"core__doc-loading",className:N({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":f})},c?c(g.percentages):e.createElement(Ne,null))},Mt=e.createContext({currentIndex:0,decreaseNumStacks:function(){},increaseNumStacks:function(){},numStacks:0}),Ot={name:"dark",colors:{primary:"117, 130, 255",primaryContent:"5, 6, 23",secondary:"255, 113, 207",secondaryContent:"25, 2, 17",accent:"0, 199, 181",accentContent:"0, 14, 12",neutral:"42, 50, 60",neutralContent:"166, 173, 187",base:"29, 35, 42",baseDarker:"25, 30, 36",baseMoreDarker:"21, 25, 30",baseContent:"166, 173, 187",error:"255, 111, 112",errorContent:"0, 0, 0"},radius:{sm:"0.25rem",md:"0.5rem",lg:"1rem"}},Tt={name:"light",colors:{primary:"73, 30, 255",primaryContent:"212, 219, 255",secondary:"255, 65, 199",secondaryContent:"255, 249, 252",accent:"0, 207, 189",accentContent:"0, 16, 13",neutral:"43, 52, 64",neutralContent:"215, 221, 228",base:"255, 255, 255",baseDarker:"242, 242, 242",baseMoreDarker:"210, 210, 210",baseContent:"31, 41, 55",error:"255, 111, 112",errorContent:"0, 0, 0"},radius:{sm:"0.25rem",md:"0.5rem",lg:"1rem"}},It="data-rpv-theme",Ft=function(t,n){var r=e.useMemo((function(){return"auto"===t?"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t}),[]),o=e.useState(r),i=o[0],c=o[1],u=a(i);return function(t){var n=e.useCallback((function(){if(document.documentElement.setAttribute(It,t.name),!document.head.querySelector("style[".concat(It,'="').concat(t.name,'"]'))){var e=document.createElement("style");e.setAttribute(It,t.name),document.head.appendChild(e),e.textContent="\n:root[".concat(It,'="').concat(t.name,'"] {\n    --rpv-color-primary: ').concat(t.colors.primary,";\n    --rpv-color-primary-content: ").concat(t.colors.primaryContent,";\n    --rpv-color-secondary: ").concat(t.colors.secondary,";\n    --rpv-color-secondary-content: ").concat(t.colors.secondaryContent,";\n    --rpv-color-accent: ").concat(t.colors.accent,";\n    --rpv-color-accent-content: ").concat(t.colors.accentContent,";\n    --rpv-color-neutral: ").concat(t.colors.neutral,";\n    --rpv-color-neutral-content: ").concat(t.colors.neutralContent,";\n    --rpv-color-base: ").concat(t.colors.base,";\n    --rpv-color-base-darker: ").concat(t.colors.baseDarker,";\n    --rpv-color-base-more-darker: ").concat(t.colors.baseMoreDarker,";\n    --rpv-color-base-content: ").concat(t.colors.baseContent,";\n    --rpv-color-error: ").concat(t.colors.error,";\n    --rpv-color-error-content: ").concat(t.colors.errorContent,";\n    --rpv-radius-sm: ").concat(t.radius.sm,";\n    --rpv-radius-md: ").concat(t.radius.md,";\n    --rpv-radius-lg: ").concat(t.radius.lg,";\n}")}}),[t]),r=e.useCallback((function(){var e=document.head.querySelector("style[".concat(It,'="').concat(t.name,'"]'));e&&document.head.removeChild(e)}),[t]);e.useEffect((function(){return n(),function(){r()}}),[t])}("light"===i?Tt:Ot),e.useEffect((function(){if("auto"===t){var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(e){c(e.matches?"dark":"light")};return e.addEventListener("change",n),function(){return e.removeEventListener("change",n)}}}),[]),e.useEffect((function(){i!==u&&n&&n(i)}),[i]),e.useEffect((function(){t!==i&&c(t)}),[t]),{currentTheme:i,setCurrentTheme:c}},Nt=function(e){return{startPage:e.startPage-3,endPage:e.endPage+3}},Dt=function(t){var n=t.characterMap,r=t.defaultScale,i=t.enableSmoothScroll,c=void 0===i||i,u=t.fileUrl,l=t.httpHeaders,d=void 0===l?{}:l,p=t.initialPage,f=void 0===p?0:p,h=t.pageLayout,g=t.initialRotation,v=void 0===g?0:g,m=t.localization,w=t.plugins,b=void 0===w?[]:w,E=t.renderError,_=t.renderLoader,y=t.renderPage,x=t.renderProtectedView,P=t.scrollMode,R=void 0===P?He.Vertical:P,k=t.setRenderRange,C=void 0===k?Nt:k,S=t.transformGetDocumentParams,L=t.theme,O=void 0===L?{direction:M.LeftToRight,theme:"light"}:L,T=t.viewMode,I=void 0===T?$.SinglePage:T,N=t.withCredentials,D=void 0!==N&&N,H=t.onDocumentAskPassword,A=t.onDocumentLoad,z=void 0===A?function(){}:A,B=t.onPageChange,V=void 0===B?function(){}:B,W=t.onRotate,q=void 0===W?function(){}:W,j=t.onRotatePage,U=void 0===j?function(){}:j,J=t.onSwitchTheme,G=void 0===J?function(){}:J,Y=t.onZoom,Z=void 0===Y?function(){}:Y,K=e.useState({data:u,name:"string"==typeof u?u:"",shouldLoad:!1}),X=K[0],Q=K[1],ee=function(e,t){Q({data:t,name:e,shouldLoad:!0})},te=e.useState(!1),ne=te[0],re=te[1],oe=a(X);e.useEffect((function(){var e,t,n,r;e=oe.data,r=typeof(t=u),"string"===(n=typeof e)&&"string"===r&&e===t||"object"===n&&"object"===r&&e.length===t.length&&e.every((function(e,n){return e===t[n]}))||Q({data:u,name:"string"==typeof u?u:"",shouldLoad:ne})}),[u,ne]);var ae=o({onVisibilityChanged:function(e){re(e.isVisible),e.isVisible&&Q((function(e){return Object.assign({},e,{shouldLoad:!0})}))}}),ie="string"==typeof O?{direction:M.LeftToRight,theme:O}:O,ce=ie.theme||"light",ue=e.useState(m||je),le=ue[0],se=ue[1],de={l10n:le,setL10n:se},pe=Object.assign({},{direction:ie.direction},Ft(ce,G)),fe=e.useState(0),he=fe[0],ge=fe[1];return e.useEffect((function(){m&&se(m)}),[m]),e.createElement(Mt.Provider,{value:{currentIndex:0,increaseNumStacks:function(){return ge((function(e){return e+1}))},decreaseNumStacks:function(){return ge((function(e){return e-1}))},numStacks:he}},e.createElement(Ue.Provider,{value:de},e.createElement(F.Provider,{value:pe},e.createElement("div",{ref:ae,className:"rpv-core__viewer","data-testid":"core__viewer",style:{height:"100%",width:"100%"}},X.shouldLoad&&e.createElement(Lt,{characterMap:n,file:X.data,httpHeaders:d,render:function(t){return e.createElement(bt,{defaultScale:r,doc:t,render:function(n,o){return e.createElement(mt,{currentFile:{data:X.data,name:X.name},defaultScale:r,doc:t,enableSmoothScroll:c,estimatedPageSizes:n,initialPage:f,initialRotation:v,initialScale:o,initialScrollMode:R,initialViewMode:I,pageLayout:h,plugins:b,renderPage:y,setRenderRange:C,viewerState:{file:X,fullScreenMode:s.Normal,pageIndex:-1,pageHeight:n[0].pageHeight,pageWidth:n[0].pageWidth,pagesRotation:new Map,rotation:v,scale:o,scrollMode:R,viewMode:I},onDocumentLoad:z,onOpenFile:ee,onPageChange:V,onRotate:q,onRotatePage:U,onZoom:Z})},scrollMode:R,viewMode:I})},renderError:E,renderLoader:_,renderProtectedView:x,transformGetDocumentParams:S,withCredentials:D,onDocumentAskPassword:H})))))},Ht=function(n){var r=n.children,o=n.workerUrl,a=t;return a.GlobalWorkerOptions.workerSrc=o,e.createElement(Be.Provider,{value:{pdfJsApiProvider:a}},r)},At=function(t){var n=t.children,r=t.testId,o=t.onClick,a=e.useContext(F).direction===M.RightToLeft,i=r?{"data-testid":r}:{};return e.createElement("button",u({className:N({"rpv-core__button":!0,"rpv-core__button--rtl":a}),type:"button",onClick:o},i),n)},zt=function(t){var n=t.attrs,r=t.children,a=t.testId,i=e.useState(!1),c=i[0],l=i[1],s=a?u(u({},n),{"data-testid":a}):n,d=o({once:!0,onVisibilityChanged:function(e){e.isVisible&&l(!0)}});return e.createElement("div",u({ref:d},s),c&&r)},Bt=function(t){var n=t.children,o=e.useRef(),a=e.useRef([]),i=e.useContext(F).direction===M.RightToLeft,c=function(e){if(o.current)switch(e.key){case"Tab":e.preventDefault();break;case"ArrowDown":e.preventDefault(),u((function(e,t){return t+1}));break;case"ArrowUp":e.preventDefault(),u((function(e,t){return t-1}));break;case"End":e.preventDefault(),u((function(e,t){return e.length-1}));break;case"Home":e.preventDefault(),u((function(e,t){return 0}))}},u=function(e){if(o.current){var t=a.current,n=t.findIndex((function(e){return"0"===e.getAttribute("tabindex")})),r=Math.min(t.length-1,Math.max(0,e(t,n)));n>=0&&n<=t.length-1&&t[n].setAttribute("tabindex","-1"),t[r].setAttribute("tabindex","0"),t[r].focus()}};return r((function(){var e=o.current;if(e){var t=function(e){var t=[];return e.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach((function(n){if(n instanceof HTMLElement){var r=n.parentElement;(r===e||"none"!==window.getComputedStyle(r).display)&&t.push(n)}})),t}(e);a.current=t}}),[]),r((function(){return document.addEventListener("keydown",c),function(){document.removeEventListener("keydown",c)}}),[]),e.createElement("div",{ref:o,"aria-orientation":"vertical",className:N({"rpv-core__menu":!0,"rpv-core__menu--rtl":i}),role:"menu",tabIndex:0},n)},Vt=function(){return e.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},Wt=function(t){var n=t.checked,r=void 0!==n&&n,o=t.children,a=t.icon,i=void 0===a?null:a,c=t.isDisabled,l=void 0!==c&&c,s=t.testId,d=t.onClick,p=e.useContext(F).direction===M.RightToLeft,f=s?{"data-testid":s}:{};return e.createElement("button",u({className:N({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":l,"rpv-core__menu-item--ltr":!p,"rpv-core__menu-item--rtl":p}),role:"menuitem",tabIndex:-1,type:"button",onClick:d},f),e.createElement("div",{className:N({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!p,"rpv-core__menu-item-icon--rtl":p})},i),e.createElement("div",{className:N({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!p,"rpv-core__menu-item-label--rtl":p})},o),e.createElement("div",{className:N({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!p,"rpv-core__menu-item-check--rtl":p})},r&&e.createElement(_e,null)))},qt=function(t){var n=t.ariaLabel,r=void 0===n?"":n,o=t.ariaKeyShortcuts,a=void 0===o?"":o,i=t.children,c=t.isDisabled,l=void 0!==c&&c,s=t.isSelected,d=void 0!==s&&s,p=t.testId,f=t.onClick,h=e.useContext(F).direction===M.RightToLeft,g=p?{"data-testid":p}:{};return e.createElement("button",u({"aria-label":r},a&&{"aria-keyshortcuts":a},l&&{"aria-disabled":!0},{className:N({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":l,"rpv-core__minimal-button--rtl":h,"rpv-core__minimal-button--selected":d}),type:"button",onClick:f},g),i)},jt=function(t){var n=t.progress,r=e.useContext(F).direction===M.RightToLeft;return e.createElement("div",{className:N({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":r})},e.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(n,"%")}},n,"%"))},Ut=function(){return e.createElement("div",{className:"rpv-core__separator"})},Jt=function(t){var n=t.constrain,r=e.useContext(F).direction===M.RightToLeft,o=e.useRef(),a=e.useRef(),i=e.useRef(),c=e.useRef(0),u=e.useRef(0),l=e.useRef(0),s=e.useRef(0),d={capture:!0},p=function(e){var t=o.current,u=a.current,d=i.current;if(t&&u&&d){var p=s.current,f=e.clientX-c.current,h=l.current+(r?-f:f),g=t.parentElement.getBoundingClientRect().width,v=100*h/g;if(t.classList.add("rpv-core__splitter--resizing"),n){var m=g-h-p;if(!n({firstHalfPercentage:v,firstHalfSize:h,secondHalfPercentage:100*m/g,secondHalfSize:m}))return}u.style.width="".concat(v,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),u.classList.add("rpv-core__splitter-sibling--resizing"),d.classList.add("rpv-core__splitter-sibling--resizing")}},f=function(e){var t=o.current,n=a.current,r=i.current;t&&n&&r&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),t.classList.remove("rpv-core__splitter--resizing"),n.classList.remove("rpv-core__splitter-sibling--resizing"),r.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",p,d),document.removeEventListener("mouseup",f,d))};return e.useEffect((function(){var e=o.current;e&&(s.current=e.getBoundingClientRect().width,a.current=e.previousElementSibling,i.current=e.nextElementSibling)}),[]),e.createElement("div",{ref:o,className:"rpv-core__splitter",onMouseDown:function(e){var t=a.current;t&&(c.current=e.clientX,u.current=e.clientY,l.current=t.getBoundingClientRect().width,document.addEventListener("mousemove",p,d),document.addEventListener("mouseup",f,d))}})},Gt=0,Yt=function(){return Gt++},Zt=function(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}},Kt=function(t,n){var r=e.useContext(Mt),o=e.useState(),a=o[0],i=o[1],c=e.useCallback((function(e){i(e)}),[]),u=e.useCallback((function(e){if(a&&r.currentIndex===r.numStacks){var t=e.target;if(t instanceof Element&&t.shadowRoot){var o=e.composedPath();o.length>0&&!a.contains(o[0])&&n()}else a.contains(t)||n()}}),[a,r.currentIndex,r.numStacks]);return e.useEffect((function(){if(t&&a){var e={capture:!0};return document.addEventListener("click",u,e),function(){document.removeEventListener("click",u,e)}}}),[a,r.currentIndex,r.numStacks]),[c]},Xt=function(t){var n=e.useContext(Mt),r=e.useCallback((function(e){"Escape"===e.key&&n.currentIndex===n.numStacks&&t()}),[n.currentIndex,n.numStacks]);e.useEffect((function(){return document.addEventListener("keyup",r),function(){document.removeEventListener("keyup",r)}}),[n.currentIndex,n.numStacks])},Qt=function(t){var n=t.ariaControlsSuffix,o=t.children,a=t.closeOnClickOutside,i=t.closeOnEscape,c=t.onClose,u=e.useContext(F).direction===M.RightToLeft,l=e.useRef(),s=Kt(a,c)[0],d=Zt([l,s]);return e.useEffect((function(){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=e}}),[]),Xt((function(){i&&c()})),r((function(){var e=l.current;if(e){var t=.75*document.body.clientHeight;e.getBoundingClientRect().height>=t&&(e.style.overflow="auto",e.style.maxHeight="".concat(t,"px"))}}),[]),e.createElement("div",{"aria-modal":"true",className:N({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":u}),id:"rpv-core__modal-body-".concat(n),ref:d,role:"dialog",tabIndex:-1},o)},$t=function(t){var n=t.children;return e.createElement("div",{className:"rpv-core__modal-overlay"},n)},en=function(t){var r=t.children,o=e.useContext(Mt),a=o.currentIndex,i=o.increaseNumStacks,c=o.decreaseNumStacks,u=o.numStacks;return e.useEffect((function(){return i(),function(){c()}}),[]),n.createPortal(e.createElement(Mt.Provider,{value:{currentIndex:a+1,decreaseNumStacks:c,increaseNumStacks:i,numStacks:u}},r),document.body)},tn=function(t){var n=t.ariaControlsSuffix,r=t.closeOnClickOutside,o=t.closeOnEscape,a=t.content,i=t.isOpened,c=void 0!==i&&i,u=t.target,l=n||"".concat(Yt()),s=W(c),d=s.opened,p=s.toggle;return e.createElement(e.Fragment,null,u&&function(t,n){return e.createElement("div",{"aria-expanded":n?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(l)},u(t,n))}(p,d),d&&e.createElement(en,null,function(t){return e.createElement($t,null,e.createElement(Qt,{ariaControlsSuffix:l,closeOnClickOutside:r,closeOnEscape:o,onClose:t},a(t)))}(p)))};!function(e){e.TopLeft="TOP_LEFT",e.TopCenter="TOP_CENTER",e.TopRight="TOP_RIGHT",e.RightTop="RIGHT_TOP",e.RightCenter="RIGHT_CENTER",e.RightBottom="RIGHT_BOTTOM",e.BottomLeft="BOTTOM_LEFT",e.BottomCenter="BOTTOM_CENTER",e.BottomRight="BOTTOM_RIGHT",e.LeftTop="LEFT_TOP",e.LeftCenter="LEFT_CENTER",e.LeftBottom="LEFT_BOTTOM"}(Et||(Et={}));var nn=function(t){var n,r=t.customClassName,o=t.position;return e.createElement("div",{className:N((n={"rpv-core__arrow":!0,"rpv-core__arrow--tl":o===Et.TopLeft,"rpv-core__arrow--tc":o===Et.TopCenter,"rpv-core__arrow--tr":o===Et.TopRight,"rpv-core__arrow--rt":o===Et.RightTop,"rpv-core__arrow--rc":o===Et.RightCenter,"rpv-core__arrow--rb":o===Et.RightBottom,"rpv-core__arrow--bl":o===Et.BottomLeft,"rpv-core__arrow--bc":o===Et.BottomCenter,"rpv-core__arrow--br":o===Et.BottomRight,"rpv-core__arrow--lt":o===Et.LeftTop,"rpv-core__arrow--lc":o===Et.LeftCenter,"rpv-core__arrow--lb":o===Et.LeftBottom},n["".concat(r)]=""!==r,n))})},rn=e.forwardRef((function(t,n){var o=t.ariaControlsSuffix,a=t.children,i=t.closeOnClickOutside,c=t.position,u=t.onClose,l=e.useRef(),s=e.useContext(F).direction===M.RightToLeft,d=Kt(i,u)[0],p=Zt([n,d]);r((function(){var e=l.current;if(e){var t=.75*document.body.clientHeight;e.getBoundingClientRect().height>=t&&(e.style.overflow="auto",e.style.maxHeight="".concat(t,"px"))}}),[]);var f="rpv-core__popover-body-inner-".concat(o);return e.createElement("div",{"aria-describedby":f,className:N({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":s}),id:"rpv-core__popover-body-".concat(o),ref:p,role:"dialog",tabIndex:-1},e.createElement(nn,{customClassName:"rpv-core__popover-body-arrow",position:c}),e.createElement("div",{id:f,ref:l},a))}));rn.displayName="PopoverBody";var on=function(t){var n=t.children,r=t.closeOnEscape,o=t.onClose,a=e.useRef();return Xt((function(){r&&o()})),e.createElement("div",{className:"rpv-core__popover-overlay",ref:a},n)},an=[Et.TopLeft,Et.TopCenter,Et.TopRight,Et.RightTop,Et.RightCenter,Et.RightBottom,Et.BottomLeft,Et.BottomCenter,Et.BottomRight,Et.LeftTop,Et.LeftCenter,Et.LeftBottom],cn=function(e,t){return t.right>=e.left&&t.left<=e.right&&t.top<=e.bottom&&t.bottom>=e.top},un=function(e,t){var n=Math.max(e.left,t.left),r=Math.max(e.top,t.top),o=Math.min(e.right,t.right),a=Math.min(e.bottom,t.bottom);return new DOMRect(n,r,o-n,a-r)},ln=function(e){return e.width*e.height},sn=function(e,t){return Math.abs(e.left-t.left)+Math.abs(e.top-t.top)},dn=function(e,t,n,r){var o=0,a=0;switch(n){case Et.TopLeft:o=e.top-t.height-r,a=e.left;break;case Et.TopCenter:o=e.top-t.height-r,a=e.left+e.width/2-t.width/2;break;case Et.TopRight:o=e.top-t.height-r,a=e.left+e.width-t.width;break;case Et.RightTop:o=e.top,a=e.left+e.width+r;break;case Et.RightCenter:o=e.top+e.height/2-t.height/2,a=e.left+e.width+r;break;case Et.RightBottom:o=e.top+e.height-t.height,a=e.left+e.width+r;break;case Et.BottomLeft:o=e.top+e.height+r,a=e.left;break;case Et.BottomCenter:o=e.top+e.height+r,a=e.left+e.width/2-t.width/2;break;case Et.BottomRight:o=e.top+e.height+r,a=e.left+e.width-t.width;break;case Et.LeftTop:o=e.top,a=e.left-t.width-r;break;case Et.LeftCenter:o=e.top+e.height/2-t.height/2,a=e.left-t.width-r;break;case Et.LeftBottom:o=e.top+e.height-t.height,a=e.left-t.width-r}return{top:o,left:a}},pn=function(t){var n=t.children,r=t.offset,o=void 0===r?0:r,a=t.position,i=t.referenceRef,c=new DOMRect,u=e.useState(),l=u[0],s=u[1],d=e.useState(a),p=d[0],f=d[1],h=e.useCallback((function(e){s(e)}),[]),g=e.useRef([]),v=C((function(){if(l&&i.current){var e=i.current.getBoundingClientRect(),t=l.getBoundingClientRect(),n=new DOMRect(0,0,window.innerWidth,window.innerHeight),r=[e,t,n];if(r.some((function(e,t){return n=e,r=g.current[t]||c,!["top","left","width","height"].every((function(e){return n[e]===r[e]}));var n,r}))){g.current=r;var u=function(e,t,n,r,o){if(!cn(e,n))return{position:r};var a=dn(e,t,r,o),i=an.map((function(n){return{offset:dn(e,t,n,o),position:n}})).filter((function(e){var r=e.offset,o=new DOMRect(r.left,r.top,t.width,t.height);return cn(o,n)})),c=i.sort((function(e,r){var o=new DOMRect(r.offset.left,r.offset.top,t.width,t.height),i=new DOMRect(e.offset.left,e.offset.top,t.width,t.height);return ln(un(o,n))-ln(un(i,n))||sn(e.offset,a)-sn(r.offset,a)}));if(0===c.length)return{position:r};var u=c[0],l=new DOMRect(u.offset.left,u.offset.top,t.width,t.height),s=new DOMRect(Math.round(tt(l.left,n.left,n.right-l.width)),Math.round(tt(l.top,n.top,n.bottom-l.height)),l.width,l.height);return{position:u.position,rect:s}}(e,t,n,a,o);u.rect&&(l.style.transform="translate(".concat(u.rect.left,"px, ").concat(u.rect.top,"px)"),f(u.position))}}}),!0,[l])[0];return e.useEffect((function(){l&&v()}),[l]),e.createElement(en,null,n({position:p,ref:h}))},fn=function(t){var n=t.ariaHasPopup,r=void 0===n?"dialog":n,o=t.ariaControlsSuffix,a=t.closeOnClickOutside,i=t.closeOnEscape,c=t.content,u=t.lockScroll,l=void 0===u||u,s=t.position,d=t.target,p=W(!1),f=p.opened,h=p.toggle,g=e.useRef(),v=e.useMemo((function(){return o||"".concat(Yt())}),[]);return e.createElement(e.Fragment,null,e.createElement("div",{ref:g,"aria-expanded":f?"true":"false","aria-haspopup":r,"aria-controls":"rpv-core__popver-body-".concat(v)},d(h,f)),f&&e.createElement(pn,{offset:8,position:s,referenceRef:g},(function(t){var n=t.position,r=t.ref,o=e.createElement(rn,{ariaControlsSuffix:v,closeOnClickOutside:a,position:n,ref:r,onClose:h},c(h));return l?e.createElement(on,{closeOnEscape:i,onClose:h},o):o})))},hn=e.forwardRef((function(t,n){var r=t.ariaControlsSuffix,o=t.children,a=t.closeOnEscape,i=t.position,c=t.onClose,u=e.useContext(F).direction===M.RightToLeft;return Xt((function(){a&&c()})),e.createElement("div",{className:N({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":u}),id:"rpv-core__tooltip-body-".concat(r),ref:n,role:"tooltip"},e.createElement(nn,{customClassName:"rpv-core__tooltip-body-arrow",position:i}),e.createElement("div",{className:"rpv-core__tooltip-body-content"},o))}));hn.displayName="TooltipBody";var gn,vn=function(t){var n=t.ariaControlsSuffix,r=t.content,o=t.position,a=t.target,i=W(!1),c=i.opened,u=i.toggle,l=e.useRef(),s=e.useRef(),d=e.useMemo((function(){return n||"".concat(Yt())}),[]),p=function(){u(I.Open)},f=function(){u(I.Close)};return e.createElement(e.Fragment,null,e.createElement("div",{ref:l,"aria-describedby":"rpv-core__tooltip-body-".concat(d),onBlur:function(e){e.relatedTarget instanceof HTMLElement&&e.currentTarget.parentElement&&e.currentTarget.parentElement.contains(e.relatedTarget)?s.current&&(s.current.style.display="none"):f()},onFocus:p,onMouseEnter:p,onMouseLeave:f},a),c&&e.createElement(pn,{offset:8,position:o,referenceRef:l},(function(t){var n=t.position,o=t.ref;return e.createElement(hn,{ariaControlsSuffix:d,closeOnEscape:!0,position:n,ref:o,onClose:f},r())})))};function mn(e){var t=e||{},n={},r=function(e,r){var o;t=u(u({},t),((o={})[e]=r,o)),(n[e]||[]).forEach((function(n){return n(t[e])}))},o=function(e){return t[e]};return{subscribe:function(e,t){n[e]=(n[e]||[]).concat(t)},unsubscribe:function(e,t){n[e]=(n[e]||[]).filter((function(e){return e!==t}))},update:function(e,t){r(e,t)},updateCurrentValue:function(e,t){var n=o(e);void 0!==n&&r(e,t(n))},get:function(e){return o(e)}}}!function(e){e.Attachments="UseAttachments",e.Bookmarks="UseOutlines",e.ContentGroup="UseOC",e.Default="UserNone",e.FullScreen="FullScreen",e.Thumbnails="UseThumbs"}(gn||(gn={}));var wn=function(){return"undefined"!=typeof window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)};export{S as AnnotationType,At as Button,Ot as DARK_THEME,s as FullScreenMode,Ee as Icon,Tt as LIGHT_THEME,ee as LayerRenderStatus,zt as LazyRender,Ue as LocalizationContext,Bt as Menu,Vt as MenuDivider,Wt as MenuItem,qt as MinimalButton,tn as Modal,gn as PageMode,Ze as PasswordStatus,Be as PdfJsApiContext,fn as Popover,Et as Position,xt as PrimaryButton,jt as ProgressBar,De as RotateDirection,He as ScrollMode,Ut as Separator,q as SpecialZoomLevel,Ne as Spinner,Jt as Splitter,Pt as TextBox,M as TextDirection,F as ThemeContext,I as ToggleStatus,vn as Tooltip,$ as ViewMode,Dt as Viewer,Ht as Worker,Ge as chunk,N as classNames,mn as createStore,ce as getDestination,ie as getPage,_ as isFullScreenEnabled,wn as isMac,Zt as mergeRefs,p as useDebounceCallback,o as useIntersectionObserver,Oe as useIsMounted,r as useIsomorphicLayoutEffect,a as usePrevious,T as useRenderQueue,Te as useSafeState};
