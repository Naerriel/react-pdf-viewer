"use strict";var e=require("@react-pdf-viewer/core"),t=require("react"),a=require("@react-pdf-viewer/attachment"),n=require("@react-pdf-viewer/bookmark"),r=require("@react-pdf-viewer/thumbnail"),l=require("@react-pdf-viewer/toolbar");function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var u=o(t),c=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:"M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3\n            M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5\n            c0.552,0,1,0.448,1,1L11.5,10.5z\n            M14.5,6.499h6\n            M14.5,10.499h6\n            M3.5,14.499h17\n            M3.5,18.499h16.497"}))},i=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:"M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883\n            c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0\n            L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9"}))},s=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\n            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z"}))},d=function(){return d=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},d.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var b=function(t){var a=t.attachmentTabContent,n=t.bookmarkTabContent,r=t.store,l=t.thumbnailTabContent,o=t.tabs,d=u.useRef(),b=u.useContext(e.LocalizationContext).l10n,f=u.useState(r.get("isCurrentTabOpened")||!1),m=f[0],p=f[1],h=u.useState(r.get("currentTab")),v=h[0],y=h[1],_=u.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,T=[{content:l,icon:u.createElement(s,null),title:b&&b.defaultLayout?b.defaultLayout.thumbnail:"Thumbnail"},{content:n,icon:u.createElement(c,null),title:b&&b.defaultLayout?b.defaultLayout.bookmark:"Bookmark"},{content:a,icon:u.createElement(i,null),title:b&&b.defaultLayout?b.defaultLayout.attachment:"Attachment"}],g=o?o(T):T,E=function(e){e>=0&&e<=g.length-1&&(r.update("isCurrentTabOpened",!0),y(e))},k=function(e){p(e)};return u.useEffect((function(){return r.subscribe("currentTab",E),r.subscribe("isCurrentTabOpened",k),function(){r.unsubscribe("currentTab",E),r.unsubscribe("isCurrentTabOpened",k)}}),[]),0===g.length?u.createElement(u.Fragment,null):u.createElement(u.Fragment,null,u.createElement("div",{"data-testid":"default-layout__sidebar",className:e.classNames({"rpv-default-layout__sidebar":!0,"rpv-default-layout__sidebar--opened":m,"rpv-default-layout__sidebar--ltr":!_,"rpv-default-layout__sidebar--rtl":_}),ref:d},u.createElement("div",{className:"rpv-default-layout__sidebar-tabs"},u.createElement("div",{className:"rpv-default-layout__sidebar-headers",role:"tablist","aria-orientation":"vertical"},g.map((function(t,a){return u.createElement("div",{"aria-controls":"rpv-default-layout__sidebar-content","aria-selected":v===a,key:a,className:"rpv-default-layout__sidebar-header",id:"rpv-default-layout__sidebar-tab-".concat(a),role:"tab"},u.createElement(e.Tooltip,{ariaControlsSuffix:"default-layout-sidebar-tab-".concat(a),position:_?e.Position.LeftCenter:e.Position.RightCenter,target:u.createElement(e.MinimalButton,{ariaLabel:t.title,isSelected:v===a,onClick:function(){return function(e){if(v===e){r.update("isCurrentTabOpened",!r.get("isCurrentTabOpened"));var t=d.current;t&&t.style.width&&t.style.removeProperty("width")}else r.update("currentTab",e)}(a)}},t.icon),content:function(){return t.title}}))}))),v>=0&&u.createElement("div",{"aria-labelledby":"rpv-default-layout__sidebar-tab-".concat(v),id:"rpv-default-layout__sidebar-content",className:e.classNames({"rpv-default-layout__sidebar-content":!0,"rpv-default-layout__sidebar-content--opened":m,"rpv-default-layout__sidebar-content--ltr":!_,"rpv-default-layout__sidebar-content--rtl":_}),role:"tabpanel",tabIndex:-1},g[v].content))),m&&u.createElement(e.Splitter,{constrain:function(e){return e.firstHalfPercentage>=20&&e.firstHalfPercentage<=80}}))};exports.BookmarkIcon=c,exports.FileIcon=i,exports.ThumbnailIcon=s,exports.defaultLayoutPlugin=function(t){var o=u.useMemo((function(){return e.createStore({isCurrentTabOpened:!1,currentTab:-1})}),[]),c=a.attachmentPlugin(),i=n.bookmarkPlugin(),s=r.thumbnailPlugin(t?t.thumbnailPlugin:{}),f=l.toolbarPlugin(t?t.toolbarPlugin:{}),m=c.Attachments,p=i.Bookmarks,h=s.Thumbnails,v=f.Toolbar,y=t?t.sidebarTabs:function(e){return e};return{attachmentPluginInstance:c,bookmarkPluginInstance:i,thumbnailPluginInstance:s,toolbarPluginInstance:f,dependencies:[c,i,s,f],activateTab:function(e){o.update("currentTab",e)},toggleTab:function(e){var t=o.get("currentTab");o.update("isCurrentTabOpened",!o.get("isCurrentTabOpened")),t!==e&&o.update("currentTab",e)},renderViewer:function(a){var n=a.slot,r=n.subSlot&&n.subSlot.attrs?{className:n.subSlot.attrs.className,"data-testid":n.subSlot.attrs["data-testid"],ref:n.subSlot.attrs.ref,style:n.subSlot.attrs.style}:{};return n.children=u.createElement("div",{className:"rpv-default-layout__container"},u.createElement("div",{"data-testid":"default-layout__main",className:e.classNames({"rpv-default-layout__main":!0,"rpv-default-layout__main--rtl":a.themeContext.direction===e.TextDirection.RightToLeft})},u.createElement(b,{attachmentTabContent:u.createElement(m,null),bookmarkTabContent:u.createElement(p,null),store:o,thumbnailTabContent:u.createElement(h,null),tabs:y}),u.createElement("div",{className:"rpv-default-layout__body","data-testid":"default-layout__body"},u.createElement("div",{className:"rpv-default-layout__toolbar"},t&&t.renderToolbar?t.renderToolbar(v):u.createElement(v,null)),u.createElement("div",d({},r),n.subSlot.children))),n.children),n.subSlot.attrs={},n.subSlot.children=u.createElement(u.Fragment,null),n},onDocumentLoad:function(e){t&&t.setInitialTab&&t.setInitialTab(e.doc).then((function(e){o.update("currentTab",e),o.update("isCurrentTabOpened",!0)}))}}},exports.setInitialTabFromPageMode=function(t){return new Promise((function(a,n){t.getPageMode().then((function(t){if(t)switch(t){case e.PageMode.Attachments:a(2);break;case e.PageMode.Bookmarks:a(1);break;case e.PageMode.Thumbnails:a(0);break;default:a(-1)}else a(-1)}))}))};
